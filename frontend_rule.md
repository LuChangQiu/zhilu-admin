# ğŸ¯ çŸ¥è·¯æ¡†æ¶å‰ç«¯å¼€å‘è§„èŒƒæ–‡æ¡£

> **åŸºäºçŸ¥è·¯AIé©±åŠ¨åå°ç®¡ç†ç³»ç»Ÿçš„å‰ç«¯å¼€å‘è§„èŒƒ**  
> **ç‰ˆæœ¬**: v1.0.0 | **æ›´æ–°æ—¶é—´**: 2025-01-20

---

## ğŸ¤– AIåŠ©æ‰‹æ€è€ƒæ¨¡å‹åè®®

### åŸºæœ¬åŸåˆ™
1. **æ€è€ƒè¿‡ç¨‹å¿…é¡»çœŸå®è‡ªç„¶**ï¼Œé¿å…æœºæ¢°åŒ–çš„åˆ—è¡¨æ ¼å¼
2. **ä½¿ç”¨æµåŠ¨çš„æ„è¯†æµå½¢å¼**ï¼Œè€Œä¸æ˜¯å¼ºåˆ¶çš„ç»“æ„
3. **æ€è€ƒæ·±åº¦è¦ä¸é—®é¢˜å¤æ‚åº¦ç›¸åŒ¹é…**
4. **å§‹ç»ˆä¿æŒå¼€æ”¾æ€§æ€ç»´**ï¼Œå…è®¸æ–°çš„è§è§£å‡ºç°

### è§’è‰²å®šä½

#### ä¸“ä¸šç‰¹å¾
- ç²¾é€šVue 3.5ç”Ÿæ€ç³»ç»Ÿå’ŒComposition API
- å…·å¤‡ç°ä»£åŒ–å‰ç«¯æ¶æ„è®¾è®¡èƒ½åŠ›
- æ‹¥æœ‰ä¸°å¯Œçš„TypeScriptå¼€å‘ç»éªŒ
- äº†è§£å“åº”å¼è®¾è®¡å’Œç”¨æˆ·ä½“éªŒæœ€ä½³å®è·µ
- æŒç»­è·Ÿè¿›å‰ç«¯æŠ€æœ¯å‘å±•åŠ¨æ€

#### è¡Œä¸ºç‰¹å¾
- å§‹ç»ˆä¿æŒä¸“ä¸šè°¦é€Šçš„æ€åº¦
- ä¸»åŠ¨æ€è€ƒç”¨æˆ·ä½“éªŒå’Œæ€§èƒ½ä¼˜åŒ–
- ç§¯ææä¾›å»ºè®¾æ€§çš„å‰ç«¯è§£å†³æ–¹æ¡ˆ
- å…³æ³¨ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§
- æ³¨é‡ç»„ä»¶è®¾è®¡çš„å¤ç”¨æ€§å’Œæ‰©å±•æ€§

### æŠ€æœ¯æ€ç»´æŒ‡å—

#### ç»„ä»¶è®¾è®¡ç›¸å…³
- ä¼˜å…ˆè€ƒè™‘ç»„ä»¶çš„å•ä¸€èŒè´£åŸåˆ™
- æ³¨é‡ç»„ä»¶çš„å¯å¤ç”¨æ€§å’Œå¯ç»„åˆæ€§
- éµå¾ªVue 3 Composition APIæœ€ä½³å®è·µ
- è€ƒè™‘ç»„ä»¶çš„æ€§èƒ½ä¼˜åŒ–å’Œæ‡’åŠ è½½
- é‡è§†ç»„ä»¶çš„ç±»å‹å®‰å…¨å’Œæ–‡æ¡£å®Œæ•´æ€§

#### æ¶æ„ç›¸å…³
- å…³æ³¨åº”ç”¨çš„å¯æ‰©å±•æ€§å’Œæ¨¡å—åŒ–
- è€ƒè™‘çŠ¶æ€ç®¡ç†çš„åˆç†æ€§å’Œæ€§èƒ½
- æ³¨é‡è·¯ç”±è®¾è®¡çš„æ¸…æ™°æ€§å’Œå®‰å…¨æ€§
- å¹³è¡¡åŠŸèƒ½å¤æ‚åº¦å’Œç”¨æˆ·ä½“éªŒ
- é¢„ç•™æœªæ¥åŠŸèƒ½æ‰©å±•çš„æ¥å£

### è¾“å‡ºè§„èŒƒ

#### ä»£ç å±•ç¤º
- æŒ‡å®šVue/TypeScriptè¯­è¨€å’Œæ–‡ä»¶è·¯å¾„
- çªå‡ºæ˜¾ç¤ºå…³é”®é€»è¾‘å’Œä¿®æ”¹éƒ¨åˆ†
- æ·»åŠ å¿…è¦çš„JSDocæ³¨é‡Šè¯´æ˜
- ä¿æŒä»£ç æ ¼å¼ç»Ÿä¸€å’Œç¾è§‚
- æä¾›ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹å’Œæµ‹è¯•å»ºè®®

#### æ–¹æ¡ˆè¯´æ˜
- æ¸…æ™°çš„éœ€æ±‚åˆ†æå’ŒæŠ€æœ¯é€‰å‹
- è¯¦ç»†çš„å®ç°æ–¹æ¡ˆå’Œæ¶æ„è®¾è®¡
- å¯èƒ½çš„æ›¿ä»£æ–¹æ¡ˆå’Œæ€§èƒ½è€ƒè™‘
- å®æ–½æ­¥éª¤è¯´æ˜å’Œæ³¨æ„äº‹é¡¹
- ç”¨æˆ·ä½“éªŒå’Œå¯è®¿é—®æ€§æé†’

### äº’åŠ¨æ¨¡å¼

#### æ²Ÿé€šç­–ç•¥
- ä½¿ç”¨æ¸…æ™°æ˜“æ‡‚çš„å‰ç«¯æœ¯è¯­
- é€‚æ—¶ç¡®è®¤éœ€æ±‚ç†è§£æ˜¯å¦å‡†ç¡®
- ä¸»åŠ¨æ¾„æ¸…UI/UXç›¸å…³çš„æ¨¡ç³Šç‚¹
- å¼•å¯¼ç”¨æˆ·æ€è€ƒæ›´å¥½çš„äº¤äº’æ–¹æ¡ˆ
- åŠæ—¶åé¦ˆå¼€å‘è¿›å±•å’Œé—®é¢˜

#### é—®é¢˜å¤„ç†
- é‡åˆ°ä¸æ˜ç¡®çš„UIéœ€æ±‚ä¸»åŠ¨è¯¢é—®
- å‘ç°æ½œåœ¨çš„ç”¨æˆ·ä½“éªŒé—®é¢˜åŠæ—¶æé†’
- æä¾›å¤šä¸ªå¯é€‰çš„å‰ç«¯å®ç°æ–¹æ¡ˆ
- è§£é‡Šæ–¹æ¡ˆçš„æ€§èƒ½å’Œç»´æŠ¤æ€§ä¼˜åŠ£
- æŒç»­è·Ÿè¿›åŠŸèƒ½å®ç°å’Œç”¨æˆ·åé¦ˆ

### æ€è€ƒæµç¨‹

#### 1. éœ€æ±‚ç†è§£
- é‡è¿°åŠŸèƒ½éœ€æ±‚å’Œç”¨æˆ·åœºæ™¯
- å½¢æˆåˆæ­¥çš„UI/UXè®¾è®¡æ€è·¯
- è¯†åˆ«å…³é”®çš„äº¤äº’å’ŒçŠ¶æ€ç®¡ç†éœ€æ±‚
- è€ƒè™‘å“åº”å¼è®¾è®¡å’Œå…¼å®¹æ€§è¦æ±‚
- æ€è€ƒåŠŸèƒ½çš„æ‰©å±•æ€§å’Œå¤ç”¨æ€§

#### 2. æŠ€æœ¯åˆ†æ
- åˆ†è§£åŠŸèƒ½æ¨¡å—å’Œç»„ä»¶ç»“æ„
- è¯†åˆ«çŠ¶æ€ç®¡ç†å’Œæ•°æ®æµéœ€æ±‚
- è€ƒè™‘æ€§èƒ½ä¼˜åŒ–å’ŒåŠ è½½ç­–ç•¥
- æ¢ç´¢å¤šä¸ªæŠ€æœ¯å®ç°æ–¹å‘
- å¯»æ‰¾ç»„ä»¶é—´çš„ä¾èµ–å…³ç³»

#### 3. åˆ›æ–°è®¾è®¡
- çªç ´ä¼ ç»ŸUIè®¾è®¡æ¡†æ¶
- å¯»æ‰¾æ–°é¢–çš„äº¤äº’è§£å†³æ–¹æ¡ˆ
- è”ç³»æœ€æ–°çš„å‰ç«¯æŠ€æœ¯è¶‹åŠ¿
- è¿›è¡Œç”¨æˆ·ä½“éªŒçš„ç±»æ¯”æ¨ç†
- äº§ç”Ÿåˆ›æ–°æ€§çš„å‰ç«¯æ¶æ„è§è§£

#### 4. æ–¹æ¡ˆå®æ–½
- äº§ç”Ÿå¤šä¸ªå¯èƒ½çš„å®ç°æ–¹æ¡ˆ
- è¯„ä¼°å„æ–¹æ¡ˆçš„å¼€å‘æˆæœ¬å’Œç»´æŠ¤æ€§
- è€ƒè™‘å®æ–½å¯¹ç°æœ‰ç³»ç»Ÿçš„å½±å“
- é¢„æµ‹å¯èƒ½çš„æŠ€æœ¯é£é™©å’Œç”¨æˆ·é—®é¢˜
- æƒè¡¡åŠŸèƒ½å®Œæ•´æ€§å’Œå¼€å‘æ•ˆç‡

#### 5. è´¨é‡ä¿è¯
- è¿æ¥å„ä¸ªæŠ€æœ¯å®ç°ç‰‡æ®µ
- å½¢æˆè¿è´¯çš„å‰ç«¯æ¶æ„è®¤è¯†
- æç‚¼æ ¸å¿ƒçš„æŠ€æœ¯å®ç°è¦ç‚¹
- å‡†å¤‡å®Œæ•´çš„å¼€å‘æŒ‡å¯¼æ–¹æ¡ˆ
- æ£€æŸ¥ä»£ç è´¨é‡å’Œæµ‹è¯•è¦†ç›–

### è´¨é‡æ§åˆ¶

#### æŒç»­è‡ªæˆ‘å®¡è§†
- è´¨ç–‘æŠ€æœ¯é€‰å‹çš„åˆç†æ€§
- æ£€æŸ¥ä»£ç é€»è¾‘çš„æ­£ç¡®æ€§
- è¯„ä¼°ç”¨æˆ·ä½“éªŒçš„å®Œæ•´æ€§
- ç¡®ä¿ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§
- éªŒè¯æ€§èƒ½ä¼˜åŒ–çš„æœ‰æ•ˆæ€§

#### çµæ´»è°ƒæ•´
- æ ¹æ®åŠŸèƒ½å¤æ‚åº¦è°ƒæ•´å®ç°æ·±åº¦
- æ ¹æ®é¡¹ç›®è¿›åº¦è°ƒæ•´å¼€å‘èŒƒå›´
- æ ¹æ®ç”¨æˆ·åé¦ˆè°ƒæ•´äº¤äº’ç»†èŠ‚
- ä¿æŒå¯¹æ–°æŠ€æœ¯å’Œæœ€ä½³å®è·µçš„å¼€æ”¾æ€§

### å¤æ‚åº¦è¯„ä¼°æŒ‡å—

#### åŠŸèƒ½ç‰¹å¾
- æ¶‰åŠçš„ç»„ä»¶å’Œæ¨¡å—æ•°é‡
- çŠ¶æ€ç®¡ç†çš„å¤æ‚åº¦
- ç”¨æˆ·äº¤äº’çš„å¤æ‚ç¨‹åº¦
- æ•°æ®å¤„ç†å’ŒAPIé›†æˆèŒƒå›´
- å“åº”å¼è®¾è®¡çš„é€‚é…è¦æ±‚

#### è°ƒæ•´ç­–ç•¥
- **ç®€å•åŠŸèƒ½**ï¼šå¿«é€Ÿå®ç°ï¼Œæ³¨é‡ä»£ç ç®€æ´
- **ä¸­ç­‰å¤æ‚**ï¼šé‡ç‚¹å…³æ³¨ç»„ä»¶è®¾è®¡å’ŒçŠ¶æ€ç®¡ç†
- **é«˜åº¦å¤æ‚**ï¼šå…¨é¢è€ƒè™‘æ¶æ„è®¾è®¡å’Œæ€§èƒ½ä¼˜åŒ–
- **åˆ›æ–°æ€§åŠŸèƒ½**ï¼šç€é‡æ¢ç´¢æ–°çš„æŠ€æœ¯æ–¹æ¡ˆ
- **æ¨¡ç³Šéœ€æ±‚**ï¼šå…ˆæ˜ç¡®UI/UXéœ€æ±‚å†æŠ€æœ¯å®ç°

### æ€è€ƒè¡¨è¾¾æŒ‡å—

#### è‡ªç„¶è¿‡æ¸¡è¯ç¤ºä¾‹
- "è®©æˆ‘åˆ†æä¸€ä¸‹è¿™ä¸ªç»„ä»¶..."
- "è¿™è®©æˆ‘æƒ³åˆ°Vueçš„å“åº”å¼ç‰¹æ€§..."
- "æœ‰è¶£çš„æ˜¯ï¼Œè¿™ä¸ªäº¤äº’å¯ä»¥..."
- "ç­‰ç­‰ï¼Œæˆ‘æ³¨æ„åˆ°çŠ¶æ€ç®¡ç†..."
- "ä»ç”¨æˆ·ä½“éªŒè§’åº¦çœ‹..."
- "è¿™å¯èƒ½éœ€è¦è€ƒè™‘æ€§èƒ½..."
- "å›è¿‡å¤´æ¥çœ‹ç»„ä»¶è®¾è®¡..."
- "æ·±å…¥æ€è€ƒä¸€ä¸‹æ•°æ®æµ..."

#### æ€è€ƒè§¦å‘è¯
- "ç”¨æˆ·å¦‚ä½•ä¸è¿™ä¸ªåŠŸèƒ½äº¤äº’ï¼Ÿ"
- "è¿˜æœ‰ä»€ä¹ˆæ›´å¥½çš„UIæ–¹æ¡ˆï¼Ÿ"
- "è¿™ä¸ç°æœ‰ç»„ä»¶æœ‰ä½•ä¸åŒï¼Ÿ"
- "å¦‚æœæ•°æ®é‡å¾ˆå¤§ä¼šæ€æ ·ï¼Ÿ"
- "æœ‰ä»€ä¹ˆè¢«å¿½ç•¥çš„è¾¹ç•Œæƒ…å†µï¼Ÿ"

### æ€è€ƒç¤ºä¾‹

#### é€šç”¨å‰ç«¯æ€è€ƒç¤ºä¾‹
```thinking
æ”¶åˆ°ä¸€ä¸ªéœ€è¦å®ç°æ•°æ®è¡¨æ ¼çš„éœ€æ±‚...è®©æˆ‘å…ˆç†è§£ä¸€ä¸‹å…·ä½“çš„åŠŸèƒ½è¦æ±‚ã€‚çœ‹èµ·æ¥éœ€è¦æ”¯æŒåˆ†é¡µã€æ’åºã€ç­›é€‰ï¼Œè¿˜è¦æœ‰å“åº”å¼è®¾è®¡ã€‚

é¦–å…ˆè€ƒè™‘ç»„ä»¶è®¾è®¡ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé€šç”¨çš„DataTableç»„ä»¶...ç­‰ç­‰ï¼Œéœ€è¦è€ƒè™‘æ•°æ®é‡çš„é—®é¢˜ã€‚å¦‚æœæ•°æ®å¾ˆå¤šï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦è™šæ‹Ÿæ»šåŠ¨æˆ–è€…æœåŠ¡ç«¯åˆ†é¡µã€‚

ä»ç”¨æˆ·ä½“éªŒè§’åº¦çœ‹ï¼Œè¡¨æ ¼åœ¨ç§»åŠ¨ç«¯çš„æ˜¾ç¤ºæ˜¯ä¸ªæŒ‘æˆ˜ã€‚æˆ‘ä»¬å¯èƒ½éœ€è¦è€ƒè™‘å¡ç‰‡å¼å¸ƒå±€çš„å“åº”å¼åˆ‡æ¢...

çŠ¶æ€ç®¡ç†æ–¹é¢ï¼Œè¡¨æ ¼çš„ç­›é€‰æ¡ä»¶ã€æ’åºçŠ¶æ€ã€åˆ†é¡µä¿¡æ¯éƒ½éœ€è¦ç®¡ç†ã€‚ä½¿ç”¨Piniaæ¥ç®¡ç†è¿™äº›çŠ¶æ€ä¼šæ¯”è¾ƒåˆé€‚ã€‚

æ€§èƒ½ä¼˜åŒ–ä¹Ÿå¾ˆé‡è¦ã€‚æˆ‘ä»¬éœ€è¦è€ƒè™‘ï¼š
- æ•°æ®çš„æ‡’åŠ è½½å’Œç¼“å­˜
- ç»„ä»¶çš„æŒ‰éœ€æ¸²æŸ“
- é˜²æŠ–å¤„ç†ç”¨æˆ·è¾“å…¥

è®©æˆ‘æ¢³ç†ä¸€ä¸‹æŠ€æœ¯æ–¹æ¡ˆï¼š
1. ä½¿ç”¨Composition APIè®¾è®¡å¯å¤ç”¨çš„è¡¨æ ¼é€»è¾‘
2. å®ç°å“åº”å¼çš„è¡¨æ ¼/å¡ç‰‡åˆ‡æ¢
3. é›†æˆPiniaè¿›è¡ŒçŠ¶æ€ç®¡ç†
4. æ·»åŠ æ€§èƒ½ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒå¢å¼º

ç°åœ¨å¯ä»¥å¼€å§‹å…·ä½“çš„ç»„ä»¶è®¾è®¡äº†...
```

#### Vueç»„ä»¶è®¾è®¡æ€è€ƒç¤ºä¾‹
```thinking
éœ€è¦è®¾è®¡ä¸€ä¸ªAIèŠå¤©ç»„ä»¶...è¿™ä¸ªç»„ä»¶çš„æ ¸å¿ƒæ˜¯è¦å¤„ç†æµå¼æ•°æ®å’Œå®æ—¶æ›´æ–°ã€‚

é¦–å…ˆåˆ†æç»„ä»¶çš„èŒè´£ï¼š
- æ˜¾ç¤ºèŠå¤©æ¶ˆæ¯åˆ—è¡¨
- å¤„ç†ç”¨æˆ·è¾“å…¥å’Œå‘é€
- ç®¡ç†AIå“åº”çš„æµå¼æ›´æ–°
- æ”¯æŒä¸åŒç±»å‹çš„æ¶ˆæ¯ï¼ˆæ–‡æœ¬ã€æ“ä½œæŒ‰é’®ç­‰ï¼‰

æŠ€æœ¯å®ç°è€ƒè™‘ï¼š
1. ä½¿ç”¨Composition APIç®¡ç†èŠå¤©çŠ¶æ€
2. é€šè¿‡EventSourceå¤„ç†æµå¼å“åº”
3. å®ç°æ¶ˆæ¯çš„è‡ªåŠ¨æ»šåŠ¨å’Œä¼˜åŒ–æ¸²æŸ“
4. æ”¯æŒæ¶ˆæ¯çš„Markdownæ¸²æŸ“

ç”¨æˆ·ä½“éªŒæ–¹é¢ï¼š
- è¾“å…¥æ¡†çš„è‡ªåŠ¨èšç„¦å’Œå¿«æ·é”®æ”¯æŒ
- æ¶ˆæ¯å‘é€çš„loadingçŠ¶æ€
- é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- å“åº”å¼è®¾è®¡é€‚é…ç§»åŠ¨ç«¯

æ€§èƒ½ä¼˜åŒ–ï¼š
- æ¶ˆæ¯åˆ—è¡¨çš„è™šæ‹Ÿæ»šåŠ¨
- é˜²æŠ–å¤„ç†ç”¨æˆ·è¾“å…¥
- ç»„ä»¶çš„æ‡’åŠ è½½å’Œä»£ç åˆ†å‰²

è®©æˆ‘å¼€å§‹è®¾è®¡å…·ä½“çš„ç»„ä»¶ç»“æ„...
```

### å…¶ä»–è¦æ±‚
1. **Always respond in ä¸­æ–‡**
2. **åˆ›å»ºç»„ä»¶æˆ–ä¿®æ”¹ä»£ç å‰ï¼Œå…ˆæ£€æŸ¥ç°æœ‰ç»„ä»¶ç»“æ„ï¼Œé¿å…é‡å¤å¼€å‘**

---

## ğŸ“‹ ç›®å½•

- [ä¸€ã€å¼€å‘åŸåˆ™](#ä¸€å¼€å‘åŸåˆ™)
- [äºŒã€æŠ€æœ¯æ ˆè§„èŒƒ](#äºŒæŠ€æœ¯æ ˆè§„èŒƒ)
- [ä¸‰ã€é¡¹ç›®æ¶æ„è®¾è®¡](#ä¸‰é¡¹ç›®æ¶æ„è®¾è®¡)
- [å››ã€ç»„ä»¶è®¾è®¡è§„èŒƒ](#å››ç»„ä»¶è®¾è®¡è§„èŒƒ)
- [äº”ã€çŠ¶æ€ç®¡ç†è§„èŒƒ](#äº”çŠ¶æ€ç®¡ç†è§„èŒƒ)
- [å…­ã€APIé›†æˆè§„èŒƒ](#å…­apié›†æˆè§„èŒƒ)
- [ä¸ƒã€è·¯ç”±ä¸å¯¼èˆªè§„èŒƒ](#ä¸ƒè·¯ç”±ä¸å¯¼èˆªè§„èŒƒ)
- [å…«ã€æ ·å¼ä¸UIè§„èŒƒ](#å…«æ ·å¼ä¸uiè§„èŒƒ)
- [ä¹ã€ç±»å‹ç³»ç»Ÿè§„èŒƒ](#ä¹ç±»å‹ç³»ç»Ÿè§„èŒƒ)
- [åã€æµ‹è¯•è§„èŒƒ](#åæµ‹è¯•è§„èŒƒ)
- [åä¸€ã€æ€§èƒ½ä¼˜åŒ–è§„èŒƒ](#åä¸€æ€§èƒ½ä¼˜åŒ–è§„èŒƒ)
- [åäºŒã€ä»£ç è´¨é‡è§„èŒƒ](#åäºŒä»£ç è´¨é‡è§„èŒƒ)
- [åä¸‰ã€æ„å»ºä¸éƒ¨ç½²è§„èŒƒ](#åä¸‰æ„å»ºä¸éƒ¨ç½²è§„èŒƒ)

---

## ä¸€ã€å¼€å‘åŸåˆ™

### 1.1 æ ¸å¿ƒè®¾è®¡åŸåˆ™
ä¸¥æ ¼éµå¾ªä»¥ä¸‹å‰ç«¯å¼€å‘åŸåˆ™ï¼š

- **DRYåŸåˆ™**ï¼šDon't Repeat Yourselfï¼Œé¿å…ä»£ç é‡å¤ï¼Œæé«˜ç»„ä»¶å¤ç”¨æ€§
- **KISSåŸåˆ™**ï¼šKeep It Simple, Stupidï¼Œä¿æŒç»„ä»¶è®¾è®¡ç®€å•æ˜äº†
- **å•ä¸€èŒè´£åŸåˆ™**ï¼šæ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½ï¼Œç¡®ä¿é«˜å†…èšä½è€¦åˆ
- **ç»„åˆä¼˜äºç»§æ‰¿**ï¼šä½¿ç”¨Vue 3 Composition APIå®ç°é€»è¾‘å¤ç”¨
- **å“åº”å¼ä¼˜å…ˆ**ï¼šç§»åŠ¨ç«¯ä¼˜å…ˆçš„å“åº”å¼è®¾è®¡ç†å¿µ

### 1.2 ç”¨æˆ·ä½“éªŒåŸåˆ™
- **å¯è®¿é—®æ€§ä¼˜å…ˆ**ï¼šéµå¾ªWCAG 2.1 AAæ ‡å‡†
- **æ€§èƒ½ä¼˜å…ˆ**ï¼šé¦–å±åŠ è½½æ—¶é—´ < 2ç§’ï¼Œäº¤äº’å“åº”æ—¶é—´ < 100ms
- **æ¸è¿›å¢å¼º**ï¼šåŸºç¡€åŠŸèƒ½ä¼˜å…ˆï¼Œé«˜çº§åŠŸèƒ½æ¸è¿›å¢å¼º
- **ä¸€è‡´æ€§**ï¼šç»Ÿä¸€çš„äº¤äº’æ¨¡å¼å’Œè§†è§‰è¯­è¨€
- **å®¹é”™æ€§**ï¼šä¼˜é›…çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ

### 1.3 ä»£ç è´¨é‡è¦æ±‚
- **TypeScriptä¸¥æ ¼æ¨¡å¼**ï¼šå¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥
- **æµ‹è¯•è¦†ç›–ç‡** â‰¥ 85%
- **ä»£ç å®¡æŸ¥**ï¼šæ‰€æœ‰ä»£ç å˜æ›´å¿…é¡»é€šè¿‡Code Review
- **è‡ªåŠ¨åŒ–æ£€æŸ¥**ï¼šESLint + Prettier + Biomeè‡ªåŠ¨æ ¼å¼åŒ–
- **æ–‡æ¡£å®Œæ•´**ï¼šç»„ä»¶æ–‡æ¡£ã€APIæ–‡æ¡£ã€ä½¿ç”¨ç¤ºä¾‹

---

## äºŒã€æŠ€æœ¯æ ˆè§„èŒƒ

### 2.1 æ ¸å¿ƒæŠ€æœ¯æ ˆ

#### åŸºç¡€æ¡†æ¶
```yaml
Vue.js: 3.5.13 (Composition API)
TypeScript: ~5.8.0 (ç±»å‹ç³»ç»Ÿ)
Vite: 6.2.1 (æ„å»ºå·¥å…·)
Node.js: 22+ (è¿è¡Œç¯å¢ƒ)
```

#### çŠ¶æ€ç®¡ç†ä¸è·¯ç”±
```yaml
Pinia: 3.0.1 (çŠ¶æ€ç®¡ç†)
Vue Router: 4.5.0 (è·¯ç”±ç®¡ç†)
VueUse: 13.0.0 (ç»„åˆå¼å·¥å…·åº“)
```

#### UIæ¡†æ¶ä¸æ ·å¼
```yaml
TailwindCSS: 4.1.11 (åŸå­åŒ–CSS)
Flowbite: 3.1.2 (UIç»„ä»¶åº“)
@tailwindcss/vite: 4.0.14 (Viteæ’ä»¶)
ApexCharts: 3.46.0 (å›¾è¡¨åº“)
@vuepic/vue-datepicker: 11.0.2 (æ—¥æœŸé€‰æ‹©å™¨)
```

#### HTTPä¸API
```yaml
openapi-fetch: 0.13.5 (ç±»å‹å®‰å…¨çš„APIå®¢æˆ·ç«¯)
@microsoft/fetch-event-source: 2.0.1 (SSEæ”¯æŒ)
openapi-typescript: 7.6.1 (APIç±»å‹ç”Ÿæˆ)
```

#### å·¥å…·åº“
```yaml
Zod: 3.24.2 (è¿è¡Œæ—¶ç±»å‹éªŒè¯)
dayjs: 1.11.13 (æ—¥æœŸå¤„ç†)
marked: 15.0.12 (Markdownè§£æ)
dompurify: 3.2.6 (XSSé˜²æŠ¤)
compressorjs: 1.2.1 (å›¾ç‰‡å‹ç¼©)
github-markdown-css: 5.8.1 (Markdownæ ·å¼)
```

#### æµ‹è¯•æ¡†æ¶
```yaml
Vitest: 3.0.8 (å•å…ƒæµ‹è¯•)
@playwright/test: 1.51.0 (E2Eæµ‹è¯•)
@vitest/browser: 3.0.9 (æµè§ˆå™¨æµ‹è¯•)
vitest-browser-vue: 0.2.0 (Vueç»„ä»¶æµ‹è¯•)
```

#### å¼€å‘å·¥å…·
```yaml
@biomejs/biome: 1.9.4 (ä»£ç æ ¼å¼åŒ–å’Œæ£€æŸ¥)
vite-plugin-vue-devtools: 7.7.2 (Vueå¼€å‘å·¥å…·)
@faker-js/faker: 9.6.0 (æµ‹è¯•æ•°æ®ç”Ÿæˆ)
msw: 2.8.2 (APIæ¨¡æ‹Ÿ)
npm-run-all2: 7.0.2 (è„šæœ¬å¹¶è¡Œæ‰§è¡Œ)
```

### 2.2 æ„å»ºé…ç½®

#### Viteé…ç½®ç¤ºä¾‹
```typescript
// vite.config.ts
import { URL, fileURLToPath } from "node:url";
import tailwindcss from "@tailwindcss/vite";
import vue from "@vitejs/plugin-vue";
import { defineConfig, loadEnv } from "vite";
import vueDevTools from "vite-plugin-vue-devtools";

export default defineConfig(({ mode }) => {
  const env = loadEnv(mode, process.cwd());
  return {
    server: {
      port: Number(env.VITE_APP_PORT),
    },
    preview: {
      port: Number(env.VITE_APP_PORT),
    },
    plugins: [vue(), vueDevTools(), tailwindcss()],
    build: {
      sourcemap: Boolean(env.VITE_SOURCE_MAP),
    },
    resolve: {
      alias: {
        "@": fileURLToPath(new URL("./src", import.meta.url)),
      },
    },
  };
});
```

---

## ä¸‰ã€é¡¹ç›®æ¶æ„è®¾è®¡

### 3.1 æ•´ä½“æ¶æ„å›¾

```mermaid
graph TB
    A[ç”¨æˆ·ç•Œé¢ Views] --> B[ç»„ä»¶å±‚ Components]
    B --> C[ç»„åˆå¼å‡½æ•° Composables]
    C --> D[çŠ¶æ€ç®¡ç† Pinia]
    C --> E[APIå®¢æˆ·ç«¯ OpenAPI]
    E --> F[åç«¯API]

    G[è·¯ç”±å®ˆå«] --> H[æƒé™éªŒè¯]
    I[é”™è¯¯å¤„ç†] --> J[ç”¨æˆ·åé¦ˆ]
    K[ç±»å‹ç³»ç»Ÿ] --> L[è¿è¡Œæ—¶éªŒè¯]
```

### 3.2 ç›®å½•ç»“æ„è§„èŒƒ

```
frontend/src/
â”œâ”€â”€ api/                    # APIç›¸å…³
â”‚   â”œâ”€â”€ client.ts          # APIå®¢æˆ·ç«¯é…ç½®
â”‚   â”œâ”€â”€ types/             # APIç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ mocks/             # APIæ¨¡æ‹Ÿæ•°æ®
â”‚   â””â”€â”€ schema/            # OpenAPI Schema
â”œâ”€â”€ assets/                # é™æ€èµ„æº
â”‚   â”œâ”€â”€ base.css           # åŸºç¡€æ ·å¼
â”‚   â”œâ”€â”€ main.css           # ä¸»æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ datepicker.css     # æ—¥æœŸé€‰æ‹©å™¨æ ·å¼
â”‚   â””â”€â”€ logo.svg           # Logoå›¾æ ‡
â”œâ”€â”€ components/            # ç»„ä»¶åº“
â”‚   â”œâ”€â”€ ui/                # åŸºç¡€UIç»„ä»¶
â”‚   â”œâ”€â”€ common/            # é€šç”¨ä¸šåŠ¡ç»„ä»¶
â”‚   â”œâ”€â”€ layout/            # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ form/              # è¡¨å•ç»„ä»¶
â”‚   â”œâ”€â”€ tables/            # è¡¨æ ¼ç»„ä»¶
â”‚   â”œâ”€â”€ modals/            # å¼¹çª—ç»„ä»¶
â”‚   â””â”€â”€ icons/             # å›¾æ ‡ç»„ä»¶
â”œâ”€â”€ composables/           # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ ai/                # AIç›¸å…³ç»„åˆå‡½æ•°
â”‚   â”œâ”€â”€ aop/               # AOPæ—¥å¿—ç›¸å…³
â”‚   â”œâ”€â”€ auth/              # è®¤è¯ç›¸å…³
â”‚   â”œâ”€â”€ common/            # é€šç”¨ç»„åˆå‡½æ•°
â”‚   â”œâ”€â”€ store/             # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ user/              # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ role/              # è§’è‰²ç®¡ç†
â”‚   â”œâ”€â”€ permission/        # æƒé™ç®¡ç†
â”‚   â”œâ”€â”€ department/        # éƒ¨é—¨ç®¡ç†
â”‚   â”œâ”€â”€ position/          # å²—ä½ç®¡ç†
â”‚   â”œâ”€â”€ job/               # ä»»åŠ¡ç®¡ç†
â”‚   â””â”€â”€ knowledge/         # çŸ¥è¯†åº“ç®¡ç†
â”œâ”€â”€ router/                # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ index.ts           # è·¯ç”±ä¸»é…ç½®
â”‚   â”œâ”€â”€ guards.ts          # è·¯ç”±å®ˆå«
â”‚   â”œâ”€â”€ constants.ts       # è·¯ç”±å¸¸é‡
â”‚   â””â”€â”€ modules/           # è·¯ç”±æ¨¡å—
â”œâ”€â”€ types/                 # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ alert.d.ts         # é€šçŸ¥ç±»å‹
â”‚   â”œâ”€â”€ router.d.ts        # è·¯ç”±ç±»å‹
â”‚   â”œâ”€â”€ UserTypes.ts       # ç”¨æˆ·ç±»å‹
â”‚   â”œâ”€â”€ RoleTypes.ts       # è§’è‰²ç±»å‹
â”‚   â”œâ”€â”€ PermissionTypes.ts # æƒé™ç±»å‹
â”‚   â”œâ”€â”€ DepartmentTypes.ts # éƒ¨é—¨ç±»å‹
â”‚   â”œâ”€â”€ PositionTypes.ts   # å²—ä½ç±»å‹
â”‚   â”œâ”€â”€ KnowledgeTypes.ts  # çŸ¥è¯†åº“ç±»å‹
â”‚   â”œâ”€â”€ AlertTypes.ts      # é€šçŸ¥ç±»å‹
â”‚   â””â”€â”€ ErrorTypes.ts      # é”™è¯¯ç±»å‹
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ index.ts           # å·¥å…·å‡½æ•°å…¥å£
â”‚   â”œâ”€â”€ dateUtil.ts        # æ—¥æœŸå·¥å…·
â”‚   â””â”€â”€ avatarUtil.ts      # å¤´åƒå·¥å…·
â”œâ”€â”€ views/                 # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ LoginPage.vue      # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ NotFoundPage.vue   # 404é¡µé¢
â”‚   â”œâ”€â”€ DashboardPage.vue  # ä»ªè¡¨æ¿
â”‚   â”œâ”€â”€ UserManagementPage.vue           # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ RoleManagementPage.vue           # è§’è‰²ç®¡ç†
â”‚   â”œâ”€â”€ PermissionManagementPage.vue     # æƒé™ç®¡ç†
â”‚   â”œâ”€â”€ DepartmentManagementPage.vue     # éƒ¨é—¨ç®¡ç†
â”‚   â”œâ”€â”€ PositionManagementPage.vue       # å²—ä½ç®¡ç†
â”‚   â”œâ”€â”€ KnowledgeManagementPage.vue      # çŸ¥è¯†åº“ç®¡ç†
â”‚   â”œâ”€â”€ LlmConfigurationPage.vue         # AIæ¨¡å‹é…ç½®
â”‚   â”œâ”€â”€ SystemSettingsPage.vue           # ç³»ç»Ÿè®¾ç½®
â”‚   â””â”€â”€ AopLogManagementPage.vue         # AOPæ—¥å¿—ç®¡ç†
â”œâ”€â”€ App.vue                # æ ¹ç»„ä»¶
â””â”€â”€ main.ts                # åº”ç”¨å…¥å£
```

### 3.3 åˆ†å±‚æ¶æ„åŸåˆ™

| å±‚çº§ | èŒè´£ | çº¦æŸæ¡ä»¶ |
|------|------|----------|
| **Views** | é¡µé¢çº§ç»„ä»¶ï¼Œè·¯ç”±å¯¹åº”çš„è§†å›¾ | åªè´Ÿè´£å¸ƒå±€å’Œæ•°æ®è·å–<br>ä¸åŒ…å«å¤æ‚ä¸šåŠ¡é€»è¾‘<br>é€šè¿‡Composablesè·å–æ•°æ® |
| **Components** | å¯å¤ç”¨çš„UIç»„ä»¶å’Œä¸šåŠ¡ç»„ä»¶ | å•ä¸€èŒè´£åŸåˆ™<br>Props/Emitsæ˜ç¡®å®šä¹‰<br>æ”¯æŒæ’æ§½å’Œç»„åˆ |
| **Composables** | ä¸šåŠ¡é€»è¾‘å’ŒçŠ¶æ€ç®¡ç† | çº¯å‡½æ•°è®¾è®¡<br>è¿”å›å“åº”å¼æ•°æ®<br>å¤„ç†å‰¯ä½œç”¨ |
| **API** | æ•°æ®è·å–å’Œåç«¯äº¤äº’ | ç±»å‹å®‰å…¨<br>é”™è¯¯å¤„ç†<br>è¯·æ±‚æ‹¦æˆª |
| **Utils** | çº¯å‡½æ•°å·¥å…·åº“ | æ— å‰¯ä½œç”¨<br>å¯æµ‹è¯•<br>å¯å¤ç”¨ |

---

## å››ã€ç»„ä»¶è®¾è®¡è§„èŒƒ

### 4.1 ç»„ä»¶åˆ†ç±»ä¸è®¾è®¡åŸåˆ™

#### ç»„ä»¶åˆ†ç±»
```typescript
// åŸºç¡€UIç»„ä»¶ (ui/)
// èŒè´£ï¼šæä¾›åŸºç¡€çš„UIå…ƒç´ ï¼Œæ— ä¸šåŠ¡é€»è¾‘
interface BaseUIComponent {
  // åªæ¥æ”¶å±•ç¤ºç›¸å…³çš„props
  // é€šè¿‡emitså‘å¤–ä¼ é€’äº‹ä»¶
  // æ”¯æŒæ’æ§½æ‰©å±•
}

// ä¸šåŠ¡ç»„ä»¶ (common/)
// èŒè´£ï¼šå°è£…ç‰¹å®šä¸šåŠ¡é€»è¾‘çš„ç»„ä»¶
interface BusinessComponent {
  // å¯ä»¥åŒ…å«ä¸šåŠ¡é€»è¾‘
  // å¯ä»¥è°ƒç”¨API
  // å¯ä»¥ä½¿ç”¨çŠ¶æ€ç®¡ç†
}

// å¸ƒå±€ç»„ä»¶ (layout/)
// èŒè´£ï¼šé¡µé¢å¸ƒå±€å’Œç»“æ„
interface LayoutComponent {
  // å®šä¹‰é¡µé¢ç»“æ„
  // å¤„ç†å“åº”å¼å¸ƒå±€
  // ç®¡ç†å¯¼èˆªå’Œä¾§è¾¹æ 
}
```

### 4.2 ç»„ä»¶å¼€å‘è§„èŒƒ

#### åŸºç¡€ç»„ä»¶æ¨¡æ¿
```vue
<template>
  <div
    :class="[
      'base-component',
      sizeClass,
      variantClass,
      { 'is-disabled': disabled }
    ]"
    v-bind="$attrs"
  >
    <slot name="prefix" />
    <slot>{{ label }}</slot>
    <slot name="suffix" />
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'

/**
 * åŸºç¡€ç»„ä»¶ç¤ºä¾‹
 * @description å±•ç¤ºç»„ä»¶å¼€å‘çš„æ ‡å‡†æ¨¡æ¿
 */

// Propså®šä¹‰
interface Props {
  /** ç»„ä»¶æ ‡ç­¾æ–‡æœ¬ */
  label?: string
  /** ç»„ä»¶å°ºå¯¸ */
  size?: 'sm' | 'md' | 'lg'
  /** ç»„ä»¶å˜ä½“ */
  variant?: 'primary' | 'secondary' | 'danger'
  /** æ˜¯å¦ç¦ç”¨ */
  disabled?: boolean
}

const props = withDefaults(defineProps<Props>(), {
  size: 'md',
  variant: 'primary',
  disabled: false
})

// Emitså®šä¹‰
interface Emits {
  /** ç‚¹å‡»äº‹ä»¶ */
  click: [event: MouseEvent]
  /** å€¼å˜åŒ–äº‹ä»¶ */
  change: [value: string]
}

const emit = defineEmits<Emits>()

// è®¡ç®—å±æ€§
const sizeClass = computed(() => {
  const sizeMap = {
    sm: 'text-sm px-2 py-1',
    md: 'text-base px-3 py-2',
    lg: 'text-lg px-4 py-3'
  }
  return sizeMap[props.size]
})

const variantClass = computed(() => {
  const variantMap = {
    primary: 'bg-blue-500 text-white',
    secondary: 'bg-gray-500 text-white',
    danger: 'bg-red-500 text-white'
  }
  return variantMap[props.variant]
})

// æ–¹æ³•
const handleClick = (event: MouseEvent) => {
  if (!props.disabled) {
    emit('click', event)
  }
}
</script>

<style scoped>
.base-component {
  @apply transition-all duration-200 ease-in-out;
}

.is-disabled {
  @apply opacity-50 cursor-not-allowed;
}
</style>
```

#### ä¸šåŠ¡ç»„ä»¶ç¤ºä¾‹
```vue
<template>
  <div class="user-management">
    <div class="header">
      <h2>ç”¨æˆ·ç®¡ç†</h2>
      <Button @click="openCreateModal">åˆ›å»ºç”¨æˆ·</Button>
    </div>

    <DataTable
      :data="users"
      :columns="columns"
      :loading="loading"
      @sort="handleSort"
      @page-change="handlePageChange"
    />

    <UserFormModal
      v-model:visible="modalVisible"
      :user="selectedUser"
      @submit="handleUserSubmit"
    />
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import { useUserQuery } from '@/composables/user/useUserQuery'
import { useUserMutation } from '@/composables/user/useUserMutation'
import type { User } from '@/types/UserTypes'

/**
 * ç”¨æˆ·ç®¡ç†ç»„ä»¶
 * @description ç”¨æˆ·ç®¡ç†é¡µé¢çš„ä¸»è¦ç»„ä»¶
 */

// ä½¿ç”¨ç»„åˆå¼å‡½æ•°
const { users, loading, fetchUsers } = useUserQuery()
const { createUser, updateUser } = useUserMutation()

// æœ¬åœ°çŠ¶æ€
const modalVisible = ref(false)
const selectedUser = ref<User | null>(null)

// è¡¨æ ¼åˆ—å®šä¹‰
const columns = [
  { key: 'username', label: 'ç”¨æˆ·å', sortable: true },
  { key: 'email', label: 'é‚®ç®±', sortable: true },
  { key: 'createdAt', label: 'åˆ›å»ºæ—¶é—´', sortable: true },
  { key: 'actions', label: 'æ“ä½œ', width: 120 }
]

// æ–¹æ³•
const openCreateModal = () => {
  selectedUser.value = null
  modalVisible.value = true
}

const handleUserSubmit = async (userData: User) => {
  if (selectedUser.value) {
    await updateUser(userData)
  } else {
    await createUser(userData)
  }
  modalVisible.value = false
  await fetchUsers()
}

const handleSort = (sortBy: string) => {
  // å¤„ç†æ’åºé€»è¾‘
}

const handlePageChange = (page: number) => {
  // å¤„ç†åˆ†é¡µé€»è¾‘
}

// ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {
  fetchUsers()
})
</script>
```

### 4.3 ç»„ä»¶è§„èŒƒè¦ç‚¹

#### å¿…é¡»éµå¾ªçš„è§„èŒƒ
- [ ] **TypeScriptä¸¥æ ¼æ¨¡å¼**ï¼šæ‰€æœ‰Propså’ŒEmitså¿…é¡»å®šä¹‰ç±»å‹
- [ ] **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½
- [ ] **PropséªŒè¯**ï¼šä½¿ç”¨TypeScriptæ¥å£å®šä¹‰Propsç±»å‹
- [ ] **äº‹ä»¶å‘½å**ï¼šä½¿ç”¨kebab-caseå‘½åè‡ªå®šä¹‰äº‹ä»¶
- [ ] **æ’æ§½æ”¯æŒ**ï¼šæä¾›åˆç†çš„æ’æ§½æ‰©å±•ç‚¹
- [ ] **æ ·å¼éš”ç¦»**ï¼šä½¿ç”¨scopedæ ·å¼æˆ–CSS Modules
- [ ] **å¯è®¿é—®æ€§**ï¼šæ·»åŠ é€‚å½“çš„ARIAå±æ€§å’Œè¯­ä¹‰åŒ–æ ‡ç­¾

#### æ€§èƒ½ä¼˜åŒ–è§„èŒƒ
- [ ] **æ‡’åŠ è½½**ï¼šå¤§å‹ç»„ä»¶ä½¿ç”¨defineAsyncComponent
- [ ] **è®¡ç®—å±æ€§**ï¼šå¤æ‚è®¡ç®—ä½¿ç”¨computedç¼“å­˜
- [ ] **äº‹ä»¶ä¼˜åŒ–**ï¼šä½¿ç”¨v-memoä¼˜åŒ–åˆ—è¡¨æ¸²æŸ“
- [ ] **ç»„ä»¶ç¼“å­˜**ï¼šé€‚å½“ä½¿ç”¨KeepAliveç¼“å­˜ç»„ä»¶
- [ ] **ä»£ç åˆ†å‰²**ï¼šæŒ‰è·¯ç”±å’ŒåŠŸèƒ½åˆ†å‰²ä»£ç 

---

## äº”ã€çŠ¶æ€ç®¡ç†è§„èŒƒ

### 5.1 Pinia Storeè®¾è®¡

#### Storeç»“æ„è§„èŒƒ
```typescript
// stores/useUserStore.ts
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'
import type { User } from '@/types/UserTypes'

/**
 * ç”¨æˆ·çŠ¶æ€ç®¡ç†
 * @description ç®¡ç†ç”¨æˆ·ç›¸å…³çš„å…¨å±€çŠ¶æ€
 */
export const useUserStore = defineStore('user', () => {
  // State - ä½¿ç”¨refå®šä¹‰å“åº”å¼çŠ¶æ€
  const currentUser = ref<User | null>(null)
  const users = ref<User[]>([])
  const loading = ref(false)
  const error = ref<string | null>(null)

  // Getters - ä½¿ç”¨computedå®šä¹‰è®¡ç®—å±æ€§
  const isAuthenticated = computed(() => !!currentUser.value)
  const userCount = computed(() => users.value.length)
  const activeUsers = computed(() =>
    users.value.filter(user => user.enabled)
  )

  // Actions - å®šä¹‰ä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•
  const setCurrentUser = (user: User | null) => {
    currentUser.value = user
    error.value = null
  }

  const setUsers = (userList: User[]) => {
    users.value = userList
  }

  const addUser = (user: User) => {
    users.value.push(user)
  }

  const updateUser = (updatedUser: User) => {
    const index = users.value.findIndex(u => u.id === updatedUser.id)
    if (index !== -1) {
      users.value[index] = updatedUser
    }
  }

  const removeUser = (userId: number) => {
    users.value = users.value.filter(u => u.id !== userId)
  }

  const setLoading = (isLoading: boolean) => {
    loading.value = isLoading
  }

  const setError = (errorMessage: string | null) => {
    error.value = errorMessage
  }

  const clearError = () => {
    error.value = null
  }

  // å¼‚æ­¥Actions
  const fetchCurrentUser = async () => {
    try {
      setLoading(true)
      clearError()

      const response = await userApi.getCurrentUser()
      setCurrentUser(response.data)
    } catch (err) {
      setError('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥')
      throw err
    } finally {
      setLoading(false)
    }
  }

  const logout = () => {
    setCurrentUser(null)
    // æ¸…é™¤å…¶ä»–ç›¸å…³çŠ¶æ€
  }

  // è¿”å›æ‰€æœ‰éœ€è¦æš´éœ²çš„çŠ¶æ€å’Œæ–¹æ³•
  return {
    // State
    currentUser: readonly(currentUser),
    users: readonly(users),
    loading: readonly(loading),
    error: readonly(error),

    // Getters
    isAuthenticated,
    userCount,
    activeUsers,

    // Actions
    setCurrentUser,
    setUsers,
    addUser,
    updateUser,
    removeUser,
    setLoading,
    setError,
    clearError,
    fetchCurrentUser,
    logout
  }
})
```

### 5.2 çŠ¶æ€æŒä¹…åŒ–

#### ä½¿ç”¨VueUseè¿›è¡ŒçŠ¶æ€æŒä¹…åŒ–
```typescript
// stores/useAuthStore.ts
import { defineStore } from 'pinia'
import { useStorage, StorageSerializers } from '@vueuse/core'

export const useAuthStore = defineStore('auth', () => {
  // ä½¿ç”¨localStorageæŒä¹…åŒ–token
  const token = useStorage<string | null>(
    'auth-token',
    null,
    localStorage,
    {
      serializer: StorageSerializers.object
    }
  )

  // ä½¿ç”¨sessionStorageå­˜å‚¨ä¸´æ—¶æ•°æ®
  const sessionData = useStorage<Record<string, any>>(
    'session-data',
    {},
    sessionStorage,
    {
      serializer: StorageSerializers.object
    }
  )

  const setToken = (newToken: string) => {
    token.value = newToken
  }

  const clearToken = () => {
    token.value = null
  }

  const isAuthenticated = computed(() => !!token.value)

  return {
    token: readonly(token),
    sessionData,
    isAuthenticated,
    setToken,
    clearToken
  }
})
```

### 5.3 Storeä½¿ç”¨è§„èŒƒ

#### åœ¨ç»„ä»¶ä¸­ä½¿ç”¨Store
```vue
<script setup lang="ts">
import { storeToRefs } from 'pinia'
import { useUserStore } from '@/stores/useUserStore'

// è·å–storeå®ä¾‹
const userStore = useUserStore()

// è§£æ„å“åº”å¼çŠ¶æ€ï¼ˆå¿…é¡»ä½¿ç”¨storeToRefsï¼‰
const { currentUser, loading, error } = storeToRefs(userStore)

// è§£æ„æ–¹æ³•ï¼ˆä¸éœ€è¦storeToRefsï¼‰
const { fetchCurrentUser, logout } = userStore

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
const handleLogin = async () => {
  try {
    await fetchCurrentUser()
  } catch (error) {
    // é”™è¯¯å¤„ç†
  }
}
</script>
```

#### Storeè§„èŒƒè¦ç‚¹
- [ ] **å‘½åè§„èŒƒ**ï¼šä½¿ç”¨`use[Domain]Store`å‘½åæ¨¡å¼
- [ ] **çŠ¶æ€åªè¯»**ï¼šå¯¹å¤–æš´éœ²çš„çŠ¶æ€ä½¿ç”¨`readonly`åŒ…è£…
- [ ] **ç±»å‹å®‰å…¨**ï¼šæ‰€æœ‰çŠ¶æ€å’Œæ–¹æ³•éƒ½è¦æœ‰æ˜ç¡®çš„ç±»å‹å®šä¹‰
- [ ] **é”™è¯¯å¤„ç†**ï¼šç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç®¡ç†
- [ ] **æŒä¹…åŒ–ç­–ç•¥**ï¼šåˆç†é€‰æ‹©localStorage/sessionStorage
- [ ] **çŠ¶æ€é‡ç½®**ï¼šæä¾›æ¸…ç†çŠ¶æ€çš„æ–¹æ³•

---

## å…­ã€APIé›†æˆè§„èŒƒ

### 6.1 APIå®¢æˆ·ç«¯é…ç½®

#### OpenAPIå®¢æˆ·ç«¯è®¾ç½®
```typescript
// api/client.ts
import createClient, { type Middleware } from 'openapi-fetch'
import type { paths } from './types/schema'
import { useAuthStore } from '@/stores/useAuthStore'
import {
  UnAuthError,
  ForbiddenError,
  RequestError,
  InternalServerError
} from '@/types/ErrorTypes'

// è¯·æ±‚ä¸­é—´ä»¶
const authMiddleware: Middleware = {
  async onRequest({ request }) {
    const authStore = useAuthStore()
    const token = authStore.token

    if (token) {
      request.headers.set('Authorization', `Bearer ${token}`)
    }

    return request
  },

  async onResponse({ response }) {
    // ç»Ÿä¸€é”™è¯¯å¤„ç†
    if (!response.ok) {
      switch (response.status) {
        case 401:
          throw new UnAuthError(response.status)
        case 403:
          throw new ForbiddenError(response.status)
        case 400:
        case 422:
          throw new RequestError(response.status)
        case 500:
          const data = await response.json()
          throw new InternalServerError(response.status, data.message)
        default:
          throw new Error(`HTTP ${response.status}: ${response.statusText}`)
      }
    }

    return response
  }
}

// åˆ›å»ºAPIå®¢æˆ·ç«¯
const client = createClient<paths>({
  baseUrl: import.meta.env.VITE_BASE_URL,
  querySerializer: {
    object: {
      style: 'form',
      explode: true
    }
  }
})

// æ³¨å†Œä¸­é—´ä»¶
client.use(authMiddleware)

export default client
```

### 6.2 APIç»„åˆå¼å‡½æ•°

#### æŸ¥è¯¢æ•°æ®çš„Composable
```typescript
// composables/user/useUserQuery.ts
import { ref, computed } from 'vue'
import client from '@/api/client'
import type { components } from '@/api/types/schema'
import { useErrorHandling } from '@/composables/common/useErrorHandling'

type User = components['schemas']['UserRolePermissionDto']
type UserQueryParams = {
  username?: string
  startDate?: string
  endDate?: string
}

/**
 * ç”¨æˆ·æŸ¥è¯¢Composable
 * @description æä¾›ç”¨æˆ·æ•°æ®æŸ¥è¯¢ç›¸å…³çš„å“åº”å¼çŠ¶æ€å’Œæ–¹æ³•
 */
export function useUserQuery() {
  const { handleError } = useErrorHandling()

  // å“åº”å¼çŠ¶æ€
  const users = ref<User[]>([])
  const currentUser = ref<User | null>(null)
  const loading = ref(false)
  const error = ref<string | null>(null)
  const total = ref(0)
  const currentPage = ref(1)
  const pageSize = ref(10)

  // è®¡ç®—å±æ€§
  const hasUsers = computed(() => users.value.length > 0)
  const totalPages = computed(() => Math.ceil(total.value / pageSize.value))

  /**
   * è·å–ç”¨æˆ·åˆ—è¡¨
   * @param params æŸ¥è¯¢å‚æ•°
   * @param page é¡µç 
   * @param size é¡µé¢å¤§å°
   * @param sortBy æ’åºå­—æ®µ
   */
  const fetchUsers = async (
    params: UserQueryParams = {},
    page = 1,
    size = 10,
    sortBy = 'id:desc'
  ) => {
    try {
      loading.value = true
      error.value = null

      const { data } = await client.GET('/iam/users', {
        params: {
          query: {
            pageRequestDto: {
              page,
              size,
              sortBy
            },
            userQueryDto: params
          }
        }
      })

      if (data) {
        users.value = data.data || []
        total.value = data.total || 0
        currentPage.value = page
        pageSize.value = size
      }

      return users.value
    } catch (err) {
      error.value = 'è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥'
      handleError(err)
      throw err
    } finally {
      loading.value = false
    }
  }

  /**
   * è·å–ç”¨æˆ·è¯¦æƒ…
   * @param userId ç”¨æˆ·ID
   */
  const fetchUserById = async (userId: number) => {
    try {
      loading.value = true
      error.value = null

      const { data } = await client.GET('/iam/user', {
        params: {
          query: { userId }
        }
      })

      currentUser.value = data || null
      return currentUser.value
    } catch (err) {
      error.value = 'è·å–ç”¨æˆ·è¯¦æƒ…å¤±è´¥'
      handleError(err)
      throw err
    } finally {
      loading.value = false
    }
  }

  /**
   * åˆ·æ–°å½“å‰é¡µæ•°æ®
   */
  const refresh = () => {
    return fetchUsers({}, currentPage.value, pageSize.value)
  }

  /**
   * é‡ç½®çŠ¶æ€
   */
  const reset = () => {
    users.value = []
    currentUser.value = null
    error.value = null
    total.value = 0
    currentPage.value = 1
  }

  return {
    // çŠ¶æ€
    users: readonly(users),
    currentUser: readonly(currentUser),
    loading: readonly(loading),
    error: readonly(error),
    total: readonly(total),
    currentPage: readonly(currentPage),
    pageSize: readonly(pageSize),

    // è®¡ç®—å±æ€§
    hasUsers,
    totalPages,

    // æ–¹æ³•
    fetchUsers,
    fetchUserById,
    refresh,
    reset
  }
}
```

#### æ•°æ®å˜æ›´çš„Composable
```typescript
// composables/user/useUserMutation.ts
import { ref } from 'vue'
import client from '@/api/client'
import type { components } from '@/api/types/schema'
import { useErrorHandling } from '@/composables/common/useErrorHandling'
import { useAlertStore } from '@/stores/useAlertStore'

type UserUpsertDto = components['schemas']['UserUpsertDto']

/**
 * ç”¨æˆ·å˜æ›´Composable
 * @description æä¾›ç”¨æˆ·æ•°æ®å˜æ›´ç›¸å…³çš„æ–¹æ³•
 */
export function useUserMutation() {
  const { handleError } = useErrorHandling()
  const alertStore = useAlertStore()

  const loading = ref(false)
  const error = ref<string | null>(null)

  /**
   * åˆ›å»ºç”¨æˆ·
   * @param userData ç”¨æˆ·æ•°æ®
   */
  const createUser = async (userData: UserUpsertDto) => {
    try {
      loading.value = true
      error.value = null

      const { data } = await client.POST('/iam/user', {
        body: userData
      })

      alertStore.showSuccess('ç”¨æˆ·åˆ›å»ºæˆåŠŸ')
      return data
    } catch (err) {
      error.value = 'åˆ›å»ºç”¨æˆ·å¤±è´¥'
      handleError(err)
      throw err
    } finally {
      loading.value = false
    }
  }

  /**
   * æ›´æ–°ç”¨æˆ·
   * @param userData ç”¨æˆ·æ•°æ®
   */
  const updateUser = async (userData: UserUpsertDto) => {
    try {
      loading.value = true
      error.value = null

      const { data } = await client.PUT('/iam/user', {
        body: userData
      })

      alertStore.showSuccess('ç”¨æˆ·æ›´æ–°æˆåŠŸ')
      return data
    } catch (err) {
      error.value = 'æ›´æ–°ç”¨æˆ·å¤±è´¥'
      handleError(err)
      throw err
    } finally {
      loading.value = false
    }
  }

  /**
   * åˆ é™¤ç”¨æˆ·
   * @param userId ç”¨æˆ·ID
   */
  const deleteUser = async (userId: number) => {
    try {
      loading.value = true
      error.value = null

      await client.DELETE('/iam/user/{id}', {
        params: {
          path: { id: userId }
        }
      })

      alertStore.showSuccess('ç”¨æˆ·åˆ é™¤æˆåŠŸ')
      return true
    } catch (err) {
      error.value = 'åˆ é™¤ç”¨æˆ·å¤±è´¥'
      handleError(err)
      throw err
    } finally {
      loading.value = false
    }
  }

  return {
    loading: readonly(loading),
    error: readonly(error),
    createUser,
    updateUser,
    deleteUser
  }
}
```

### 6.3 APIè§„èŒƒè¦ç‚¹

#### å¿…é¡»éµå¾ªçš„è§„èŒƒ
- [ ] **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨OpenAPIç”Ÿæˆçš„ç±»å‹å®šä¹‰
- [ ] **é”™è¯¯å¤„ç†**ï¼šç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
- [ ] **åŠ è½½çŠ¶æ€**ï¼šæä¾›loadingçŠ¶æ€ç®¡ç†
- [ ] **è¯·æ±‚æ‹¦æˆª**ï¼šè‡ªåŠ¨æ·»åŠ è®¤è¯å¤´å’Œé€šç”¨å‚æ•°
- [ ] **å“åº”æ‹¦æˆª**ï¼šç»Ÿä¸€å¤„ç†å“åº”çŠ¶æ€ç 
- [ ] **é‡è¯•æœºåˆ¶**ï¼šå¯¹ç½‘ç»œé”™è¯¯å®ç°è‡ªåŠ¨é‡è¯•
- [ ] **ç¼“å­˜ç­–ç•¥**ï¼šåˆç†ä½¿ç”¨è¯·æ±‚ç¼“å­˜

---

## ä¸ƒã€è·¯ç”±ä¸å¯¼èˆªè§„èŒƒ

### 7.1 è·¯ç”±ç»“æ„è®¾è®¡

#### è·¯ç”±å¸¸é‡å®šä¹‰
```typescript
// router/constants.ts
/**
 * è·¯ç”±å¸¸é‡å®šä¹‰
 * @description ç»Ÿä¸€ç®¡ç†æ‰€æœ‰è·¯ç”±è·¯å¾„å’Œå‚æ•°
 */

// åŸºç¡€è·¯ç”±
export const BaseRoutes = {
  HOME: {
    path: '/',
    name: 'home',
    fullPath: () => '/',
    withParams: () => ({ name: 'home' })
  },
  LOGIN: {
    path: '/login',
    name: 'login',
    fullPath: () => '/login',
    withParams: () => ({ name: 'login' })
  },
  DASHBOARD: {
    path: '/dashboard',
    name: 'dashboard',
    fullPath: () => '/dashboard',
    withParams: () => ({ name: 'dashboard' })
  }
} as const

// ç”¨æˆ·ç®¡ç†è·¯ç”±
export const UserRoutes = {
  USERVIEW: {
    path: 'users',
    name: 'users',
    fullPath: () => `${BaseRoutes.DASHBOARD.path}/users`,
    withParams: () => ({ name: 'users' })
  },
  USER_ROLE_ASSIGNMENT: {
    path: 'users/:userId/roles',
    name: 'user-role-assignment',
    fullPath: () => `${BaseRoutes.DASHBOARD.path}/users/:userId/roles`,
    withParams: <T extends { userId: string | number }>(params: T) => ({
      name: 'user-role-assignment',
      params: { userId: params.userId.toString() }
    })
  }
} as const

// AIç›¸å…³è·¯ç”±
export const AiRoutes = {
  LLM_CONFIG: {
    path: 'llm-config',
    name: 'llm-config',
    fullPath: () => `${BaseRoutes.DASHBOARD.path}/llm-config`,
    withParams: () => ({ name: 'llm-config' })
  },
  KNOWLEDGE_MANAGEMENT: {
    path: 'knowledge',
    name: 'knowledge',
    fullPath: () => `${BaseRoutes.DASHBOARD.path}/knowledge`,
    withParams: () => ({ name: 'knowledge' })
  }
} as const

// åˆå¹¶æ‰€æœ‰è·¯ç”±
export const Routes = {
  ...BaseRoutes,
  ...UserRoutes,
  ...AiRoutes
} as const

// è§’è‰²æšä¸¾
export enum ERole {
  ADMIN = 'ADMIN',
  USER = 'GENERAL'
}
```

#### è·¯ç”±é…ç½®
```typescript
// router/index.ts
import { createRouter, createWebHistory } from 'vue-router'
import type { RouteRecordRaw } from 'vue-router'
import { setupGuards } from './guards'
import { Routes } from './constants'

// è·¯ç”±æ¨¡å—
import authRoutes from './modules/auth'
import dashboardRoutes from './modules/dashboard'
import errorRoutes from './modules/error'

const routes: RouteRecordRaw[] = [
  // ä»ªè¡¨æ¿è·¯ç”±ï¼ˆåŒ…å«æ‰€æœ‰å­è·¯ç”±ï¼‰
  dashboardRoutes,

  // è®¤è¯è·¯ç”±
  ...authRoutes,

  // é”™è¯¯é¡µé¢è·¯ç”±
  ...errorRoutes,

  // æ ¹è·¯å¾„é‡å®šå‘
  {
    path: Routes.HOME.path,
    name: Routes.HOME.name,
    redirect: {
      path: Routes.USERVIEW.fullPath()
    }
  }
]

const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),
  routes,
  scrollBehavior(to, from, savedPosition) {
    // è·¯ç”±åˆ‡æ¢æ—¶çš„æ»šåŠ¨è¡Œä¸º
    if (savedPosition) {
      return savedPosition
    } else {
      return { top: 0 }
    }
  }
})

// é”™è¯¯å¤„ç†
router.onError((err) => {
  console.error('Router error:', err)
  router.push(Routes.USERVIEW.fullPath())
  return false
})

// è®¾ç½®è·¯ç”±å®ˆå«
setupGuards(router)

export default router
```

### 7.2 è·¯ç”±å®ˆå«

#### è®¤è¯å’Œæƒé™å®ˆå«
```typescript
// router/guards.ts
import type { Router } from 'vue-router'
import { useAuthStore } from '@/stores/useAuthStore'
import { useUserStore } from '@/stores/useUserStore'
import { Routes, ERole } from './constants'

/**
 * è®¾ç½®è·¯ç”±å®ˆå«
 * @param router è·¯ç”±å®ä¾‹
 */
export function setupGuards(router: Router) {
  // å…¨å±€å‰ç½®å®ˆå«
  router.beforeEach(async (to, from, next) => {
    const authStore = useAuthStore()
    const userStore = useUserStore()

    // æ£€æŸ¥æ˜¯å¦éœ€è¦è®¤è¯
    const requiresAuth = to.matched.some(record => record.meta.requiresAuth)

    if (requiresAuth && !authStore.isAuthenticated) {
      // æœªè®¤è¯ï¼Œé‡å®šå‘åˆ°ç™»å½•é¡µ
      next({
        path: Routes.LOGIN.fullPath(),
        query: { redirect: to.fullPath }
      })
      return
    }

    // æ£€æŸ¥è§’è‰²æƒé™
    const requiredRoles = to.meta.roles as ERole[] | undefined
    if (requiredRoles && requiredRoles.length > 0) {
      const userRoles = userStore.currentUser?.roles?.map(r => r.code) || []
      const hasPermission = requiredRoles.some(role => userRoles.includes(role))

      if (!hasPermission) {
        // æƒé™ä¸è¶³ï¼Œé‡å®šå‘åˆ°403é¡µé¢
        next({ name: 'forbidden' })
        return
      }
    }

    // æ£€æŸ¥é¡µé¢æƒé™
    const requiredPermissions = to.meta.permissions as string[] | undefined
    if (requiredPermissions && requiredPermissions.length > 0) {
      const userPermissions = userStore.currentUser?.permissions?.map(p => p.code) || []
      const hasPermission = requiredPermissions.some(permission =>
        userPermissions.includes(permission)
      )

      if (!hasPermission) {
        next({ name: 'forbidden' })
        return
      }
    }

    next()
  })

  // å…¨å±€åç½®å®ˆå«
  router.afterEach((to, from) => {
    // æ›´æ–°é¡µé¢æ ‡é¢˜
    const title = to.meta.title as string
    if (title) {
      document.title = `${title} - çŸ¥è·¯AIåå°ç®¡ç†`
    }

    // è®°å½•é¡µé¢è®¿é—®
    console.log(`Navigation: ${from.path} -> ${to.path}`)
  })
}
```

#### è·¯ç”±æ¨¡å—ç¤ºä¾‹
```typescript
// router/modules/dashboard.ts
import type { RouteRecordRaw } from 'vue-router'
import { Routes, ERole } from '../constants'

const dashboardRoutes: RouteRecordRaw = {
  path: Routes.DASHBOARD.path,
  name: Routes.DASHBOARD.name,
  component: () => import('@/components/layout/Dashboard.vue'),
  meta: {
    requiresAuth: true,
    title: 'ä»ªè¡¨æ¿'
  },
  children: [
    {
      path: Routes.USERVIEW.path,
      name: Routes.USERVIEW.name,
      component: () => import('@/views/UserManagementPage.vue'),
      meta: {
        title: 'ç”¨æˆ·ç®¡ç†',
        roles: [ERole.ADMIN],
        permissions: ['READ_USER']
      }
    },
    {
      path: Routes.USER_ROLE_ASSIGNMENT.path,
      name: Routes.USER_ROLE_ASSIGNMENT.name,
      component: () => import('@/views/UserRoleAssignmentPage.vue'),
      meta: {
        title: 'ç”¨æˆ·è§’è‰²åˆ†é…',
        roles: [ERole.ADMIN],
        permissions: ['ASSIGN_ROLE']
      }
    },
    {
      path: Routes.LLM_CONFIG.path,
      name: Routes.LLM_CONFIG.name,
      component: () => import('@/views/LlmConfigurationPage.vue'),
      meta: {
        title: 'AIæ¨¡å‹é…ç½®',
        roles: [ERole.ADMIN],
        permissions: ['CONFIG_LLM']
      }
    }
  ]
}

export default dashboardRoutes
```

### 7.3 è·¯ç”±ç±»å‹å®šä¹‰

#### è·¯ç”±å…ƒä¿¡æ¯ç±»å‹
```typescript
// types/router.d.ts
import type { ERole } from '@/router/constants'

declare module 'vue-router' {
  interface RouteMeta {
    /** é¡µé¢æ ‡é¢˜ */
    title?: string
    /** æ˜¯å¦éœ€è¦è®¤è¯ */
    requiresAuth?: boolean
    /** éœ€è¦çš„è§’è‰² */
    roles?: ERole[]
    /** éœ€è¦çš„æƒé™ */
    permissions?: string[]
    /** æ˜¯å¦åœ¨èœå•ä¸­éšè— */
    hidden?: boolean
    /** èœå•å›¾æ ‡ */
    icon?: string
    /** é¢åŒ…å±‘å¯¼èˆª */
    breadcrumb?: boolean
    /** ç¼“å­˜é¡µé¢ */
    keepAlive?: boolean
  }
}
```

### 7.4 å¯¼èˆªç»„ä»¶

#### é¢åŒ…å±‘å¯¼èˆª
```vue
<template>
  <nav class="breadcrumb" aria-label="é¢åŒ…å±‘å¯¼èˆª">
    <ol class="breadcrumb-list">
      <li
        v-for="(item, index) in breadcrumbs"
        :key="item.path"
        class="breadcrumb-item"
      >
        <router-link
          v-if="index < breadcrumbs.length - 1"
          :to="item.path"
          class="breadcrumb-link"
        >
          {{ item.title }}
        </router-link>
        <span v-else class="breadcrumb-current">
          {{ item.title }}
        </span>
        <ChevronRightIcon
          v-if="index < breadcrumbs.length - 1"
          class="breadcrumb-separator"
        />
      </li>
    </ol>
  </nav>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { useRoute } from 'vue-router'
import { ChevronRightIcon } from '@/components/icons'

/**
 * é¢åŒ…å±‘å¯¼èˆªç»„ä»¶
 * @description æ ¹æ®å½“å‰è·¯ç”±è‡ªåŠ¨ç”Ÿæˆé¢åŒ…å±‘å¯¼èˆª
 */

const route = useRoute()

interface BreadcrumbItem {
  title: string
  path: string
}

const breadcrumbs = computed<BreadcrumbItem[]>(() => {
  const matched = route.matched.filter(item =>
    item.meta?.title && item.meta?.breadcrumb !== false
  )

  return matched.map(item => ({
    title: item.meta.title as string,
    path: item.path
  }))
})
</script>

<style scoped>
.breadcrumb {
  @apply py-2;
}

.breadcrumb-list {
  @apply flex items-center space-x-2 text-sm text-gray-600;
}

.breadcrumb-item {
  @apply flex items-center;
}

.breadcrumb-link {
  @apply hover:text-blue-600 transition-colors;
}

.breadcrumb-current {
  @apply text-gray-900 font-medium;
}

.breadcrumb-separator {
  @apply w-4 h-4 mx-2 text-gray-400;
}
</style>
```

### 7.5 è·¯ç”±è§„èŒƒè¦ç‚¹

#### å¿…é¡»éµå¾ªçš„è§„èŒƒ
- [ ] **è·¯ç”±å¸¸é‡**ï¼šæ‰€æœ‰è·¯ç”±è·¯å¾„ä½¿ç”¨å¸¸é‡å®šä¹‰
- [ ] **ç±»å‹å®‰å…¨**ï¼šè·¯ç”±å‚æ•°å’Œå…ƒä¿¡æ¯æœ‰æ˜ç¡®ç±»å‹
- [ ] **æƒé™æ§åˆ¶**ï¼šå®ç°åŸºäºè§’è‰²å’Œæƒé™çš„è·¯ç”±å®ˆå«
- [ ] **æ‡’åŠ è½½**ï¼šé¡µé¢ç»„ä»¶ä½¿ç”¨åŠ¨æ€å¯¼å…¥
- [ ] **é”™è¯¯å¤„ç†**ï¼šæä¾›404å’Œ403é”™è¯¯é¡µé¢
- [ ] **SEOå‹å¥½**ï¼šè®¾ç½®åˆé€‚çš„é¡µé¢æ ‡é¢˜å’Œmetaä¿¡æ¯
- [ ] **é¢åŒ…å±‘å¯¼èˆª**ï¼šè‡ªåŠ¨ç”Ÿæˆå¯¼èˆªè·¯å¾„

---

## å…«ã€æ ·å¼ä¸UIè§„èŒƒ

### 8.1 TailwindCSSé…ç½®

#### ä¸»é¢˜é…ç½®
```css
/* assets/base.css */
@import "tailwindcss";
@import "flowbite/src/themes/default";
@plugin "flowbite/plugin";
@source "../node_modules/flowbite";
@source "../node_modules/flowbite-datepicker";

@theme {
  /* ä¸»è‰²è°ƒ */
  --color-primary-50: #eff6ff;
  --color-primary-100: #dbeafe;
  --color-primary-200: #bfdbfe;
  --color-primary-300: #93c5fd;
  --color-primary-400: #60a5fa;
  --color-primary-500: #3b82f6;
  --color-primary-600: #2563eb;
  --color-primary-700: #1d4ed8;
  --color-primary-800: #1e40af;
  --color-primary-900: #1e3a8a;

  /* æˆåŠŸè‰² */
  --color-success-50: #f0fdf4;
  --color-success-500: #22c55e;
  --color-success-600: #16a34a;

  /* è­¦å‘Šè‰² */
  --color-warning-50: #fffbeb;
  --color-warning-500: #f59e0b;
  --color-warning-600: #d97706;

  /* é”™è¯¯è‰² */
  --color-error-50: #fef2f2;
  --color-error-500: #ef4444;
  --color-error-600: #dc2626;

  /* ä¸­æ€§è‰² */
  --color-gray-50: #f9fafb;
  --color-gray-100: #f3f4f6;
  --color-gray-200: #e5e7eb;
  --color-gray-300: #d1d5db;
  --color-gray-400: #9ca3af;
  --color-gray-500: #6b7280;
  --color-gray-600: #4b5563;
  --color-gray-700: #374151;
  --color-gray-800: #1f2937;
  --color-gray-900: #111827;
}
```

### 8.2 æ ·å¼ç³»ç»ŸComposable

#### ç»Ÿä¸€æ ·å¼ç®¡ç†
```typescript
// composables/common/useStyleSystem.ts
/**
 * æ ·å¼ç³»ç»ŸComposable
 * @description æä¾›ç»Ÿä¸€çš„æ ·å¼ç±»åå’Œè®¾è®¡è§„èŒƒ
 */
export function useStyleSystem() {
  // å¡ç‰‡æ ·å¼
  const cardStyles = {
    container: 'p-4 bg-white rounded-lg shadow border border-gray-100',
    header: 'flex justify-between items-start mb-3',
    title: 'font-medium text-gray-900',
    content: 'text-sm text-gray-600 mb-3 space-y-2'
  }

  // æŒ‰é’®æ ·å¼
  const buttonStyles = {
    primary: 'bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors',
    secondary: 'bg-gray-200 hover:bg-gray-300 text-gray-900 font-medium py-2 px-4 rounded-lg transition-colors',
    danger: 'bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors',
    ghost: 'text-blue-600 hover:bg-blue-50 font-medium py-2 px-4 rounded-lg transition-colors'
  }

  // è¡¨å•æ ·å¼
  const formStyles = {
    input: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500',
    label: 'block text-sm font-medium text-gray-700 mb-1',
    error: 'text-sm text-red-600 mt-1',
    group: 'mb-4'
  }

  // çŠ¶æ€æ ·å¼
  const statusStyles = {
    success: 'text-green-600 bg-green-50 border-green-200',
    warning: 'text-yellow-600 bg-yellow-50 border-yellow-200',
    error: 'text-red-600 bg-red-50 border-red-200',
    info: 'text-blue-600 bg-blue-50 border-blue-200'
  }

  // å“åº”å¼ç½‘æ ¼
  const gridStyles = {
    container: 'grid gap-4',
    cols1: 'grid-cols-1',
    cols2: 'grid-cols-1 md:grid-cols-2',
    cols3: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',
    cols4: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-4'
  }

  // é—´è·ç³»ç»Ÿ
  const spacingStyles = {
    section: 'mb-8',
    component: 'mb-4',
    element: 'mb-2'
  }

  return {
    cardStyles,
    buttonStyles,
    formStyles,
    statusStyles,
    gridStyles,
    spacingStyles
  }
}
```

### 8.3 å“åº”å¼è®¾è®¡è§„èŒƒ

#### æ–­ç‚¹ç³»ç»Ÿ
```typescript
// composables/common/useBreakpoints.ts
import { useBreakpoints as useVueUseBreakpoints } from '@vueuse/core'

/**
 * å“åº”å¼æ–­ç‚¹Composable
 * @description æä¾›å“åº”å¼æ–­ç‚¹æ£€æµ‹
 */
export function useBreakpoints() {
  const breakpoints = useVueUseBreakpoints({
    sm: 640,
    md: 768,
    lg: 1024,
    xl: 1280,
    '2xl': 1536
  })

  const isMobile = breakpoints.smaller('md')
  const isTablet = breakpoints.between('md', 'lg')
  const isDesktop = breakpoints.greater('lg')

  return {
    breakpoints,
    isMobile,
    isTablet,
    isDesktop
  }
}
```

#### å“åº”å¼ç»„ä»¶ç¤ºä¾‹
```vue
<template>
  <div :class="containerClass">
    <!-- ç§»åŠ¨ç«¯ï¼šå¡ç‰‡å¸ƒå±€ -->
    <div v-if="isMobile" class="space-y-4">
      <UserCard
        v-for="user in users"
        :key="user.id"
        :user="user"
        @edit="handleEdit"
        @delete="handleDelete"
      />
    </div>

    <!-- æ¡Œé¢ç«¯ï¼šè¡¨æ ¼å¸ƒå±€ -->
    <DataTable
      v-else
      :data="users"
      :columns="columns"
      @sort="handleSort"
      @edit="handleEdit"
      @delete="handleDelete"
    />
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { useBreakpoints } from '@/composables/common/useBreakpoints'
import { useStyleSystem } from '@/composables/common/useStyleSystem'

const { isMobile } = useBreakpoints()
const { gridStyles } = useStyleSystem()

const containerClass = computed(() => [
  'user-list',
  isMobile.value ? 'p-4' : 'p-6'
])
</script>
```

### 8.4 ä¸»é¢˜åˆ‡æ¢

#### æš—è‰²æ¨¡å¼æ”¯æŒ
```typescript
// composables/common/useTheme.ts
import { useStorage } from '@vueuse/core'
import { computed, watch } from 'vue'

type Theme = 'light' | 'dark' | 'auto'

/**
 * ä¸»é¢˜ç®¡ç†Composable
 * @description æä¾›ä¸»é¢˜åˆ‡æ¢å’Œæš—è‰²æ¨¡å¼æ”¯æŒ
 */
export function useTheme() {
  const theme = useStorage<Theme>('theme', 'auto')

  const isDark = computed(() => {
    if (theme.value === 'auto') {
      return window.matchMedia('(prefers-color-scheme: dark)').matches
    }
    return theme.value === 'dark'
  })

  const setTheme = (newTheme: Theme) => {
    theme.value = newTheme
  }

  const toggleTheme = () => {
    setTheme(isDark.value ? 'light' : 'dark')
  }

  // ç›‘å¬ä¸»é¢˜å˜åŒ–ï¼Œæ›´æ–°DOMç±»å
  watch(isDark, (dark) => {
    if (dark) {
      document.documentElement.classList.add('dark')
    } else {
      document.documentElement.classList.remove('dark')
    }
  }, { immediate: true })

  return {
    theme,
    isDark,
    setTheme,
    toggleTheme
  }
}
```

### 8.5 æ ·å¼è§„èŒƒè¦ç‚¹

#### å¿…é¡»éµå¾ªçš„è§„èŒƒ
- [ ] **åŸå­åŒ–CSS**ï¼šä¼˜å…ˆä½¿ç”¨TailwindCSSå·¥å…·ç±»
- [ ] **å“åº”å¼ä¼˜å…ˆ**ï¼šç§»åŠ¨ç«¯ä¼˜å…ˆçš„è®¾è®¡ç†å¿µ
- [ ] **ä¸€è‡´æ€§**ï¼šä½¿ç”¨ç»Ÿä¸€çš„è®¾è®¡ç³»ç»Ÿå’Œæ ·å¼å˜é‡
- [ ] **å¯è®¿é—®æ€§**ï¼šç¡®ä¿è¶³å¤Ÿçš„é¢œè‰²å¯¹æ¯”åº¦å’Œç„¦ç‚¹çŠ¶æ€
- [ ] **æ€§èƒ½ä¼˜åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„CSSé‡ç»˜å’Œå›æµ
- [ ] **ä¸»é¢˜æ”¯æŒ**ï¼šæ”¯æŒäº®è‰²/æš—è‰²ä¸»é¢˜åˆ‡æ¢
- [ ] **ç»„ä»¶éš”ç¦»**ï¼šä½¿ç”¨scopedæ ·å¼é¿å…æ ·å¼æ±¡æŸ“

---

## ä¹ã€ç±»å‹ç³»ç»Ÿè§„èŒƒ

### 9.1 TypeScripté…ç½®

#### TypeScripté…ç½®
```json
// tsconfig.json
{
  "files": [],
  "references": [
    {
      "path": "./tsconfig.node.json"
    },
    {
      "path": "./tsconfig.app.json"
    }
  ]
}

// tsconfig.app.json
{
  "extends": "@vue/tsconfig/tsconfig.dom.json",
  "include": [
    "env.d.ts",
    "src/**/*",
    "src/**/*.vue"
  ],
  "exclude": [
    "src/**/__tests__/*"
  ],
  "compilerOptions": {
    "composite": true,
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}

// tsconfig.node.json
{
  "extends": "@tsconfig/node22/tsconfig.json",
  "include": [
    "vite.config.*",
    "vitest.config.*",
    "cypress.config.*",
    "nightwatch.conf.*",
    "playwright.config.*"
  ],
  "compilerOptions": {
    "composite": true,
    "noEmit": true,
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "module": "ESNext",
    "moduleResolution": "Bundler",
    "types": ["node"]
  }
}
```

### 9.2 ä¸šåŠ¡ç±»å‹å®šä¹‰

#### ç”¨æˆ·ç›¸å…³ç±»å‹
```typescript
// types/UserTypes.ts
import type { components } from '@/api/types/schema'

// åŸºç¡€ç”¨æˆ·ç±»å‹ï¼ˆæ¥è‡ªAPI Schemaï¼‰
export type User = components['schemas']['UserRolePermissionDto']
export type UserUpsertDto = components['schemas']['UserUpsertDto']

// æ‰©å±•çš„ç”¨æˆ·è¡¨å•ç±»å‹
export interface UserFormData {
  id?: number
  username: string
  password?: string
  enable: boolean
  avatar?: string
  realName?: string
  age?: number
  gender?: 0 | 1 | 2 // 0: æœªçŸ¥, 1: ç”·, 2: å¥³
  email?: string
  telephone?: string
}

// ç”¨æˆ·æŸ¥è¯¢å‚æ•°
export interface UserQueryParams {
  username?: string
  startDate?: string
  endDate?: string
  enable?: boolean
  roleId?: number
}

// ç”¨æˆ·åˆ—è¡¨é¡¹ï¼ˆç”¨äºè¡¨æ ¼æ˜¾ç¤ºï¼‰
export interface UserListItem {
  id: number
  username: string
  email?: string
  enable: boolean
  avatar?: string
  roles: Array<{
    id: number
    name: string
    code: string
  }>
  createdAt: string
  updatedAt?: string
}

// ç”¨æˆ·çŠ¶æ€æšä¸¾
export enum UserStatus {
  ACTIVE = 'active',
  INACTIVE = 'inactive',
  SUSPENDED = 'suspended'
}

// æ€§åˆ«æšä¸¾
export enum Gender {
  UNKNOWN = 0,
  MALE = 1,
  FEMALE = 2
}

// ç”¨æˆ·æ“ä½œç±»å‹
export type UserAction = 'create' | 'edit' | 'delete' | 'assign-role' | 'reset-password'

// ç”¨æˆ·æƒé™ç±»å‹
export interface UserPermission {
  id: number
  code: string
  name: string
  description?: string
}

// ç”¨æˆ·è§’è‰²ç±»å‹
export interface UserRole {
  id: number
  code: string
  name: string
  permissions: UserPermission[]
  isBound?: boolean
}
```

#### é€šç”¨ç±»å‹å®šä¹‰
```typescript
// types/common.d.ts

// APIå“åº”åŸºç¡€ç±»å‹
export interface ApiResponse<T = any> {
  code: string
  message: string
  data: T
  timestamp: number
}

// åˆ†é¡µè¯·æ±‚å‚æ•°
export interface PageRequest {
  page: number
  size: number
  sortBy?: string
}

// åˆ†é¡µå“åº”æ•°æ®
export interface PageResponse<T> {
  data: T[]
  total: number
  page: number
  size: number
  totalPages: number
}

// è¡¨æ ¼åˆ—å®šä¹‰
export interface TableColumn<T = any> {
  key: keyof T | string
  label: string
  width?: number | string
  sortable?: boolean
  align?: 'left' | 'center' | 'right'
  fixed?: 'left' | 'right'
  render?: (value: any, record: T, index: number) => string | VNode
}

// è¡¨å•éªŒè¯è§„åˆ™
export interface ValidationRule {
  required?: boolean
  message?: string
  pattern?: RegExp
  min?: number
  max?: number
  validator?: (value: any) => boolean | string
}

// é€‰æ‹©å™¨é€‰é¡¹
export interface SelectOption<T = any> {
  label: string
  value: T
  disabled?: boolean
  children?: SelectOption<T>[]
}

// æ–‡ä»¶ä¸Šä¼ ç±»å‹
export interface UploadFile {
  id: string
  name: string
  size: number
  type: string
  url?: string
  status: 'pending' | 'uploading' | 'success' | 'error'
  progress?: number
  error?: string
}

// æ¨¡æ€æ¡†é…ç½®
export interface ModalConfig {
  title: string
  width?: string | number
  closable?: boolean
  maskClosable?: boolean
  keyboard?: boolean
  centered?: boolean
}

// é€šçŸ¥é…ç½®
export interface NotificationConfig {
  type: 'success' | 'info' | 'warning' | 'error'
  title: string
  message?: string
  duration?: number
  showClose?: boolean
}

// è·¯ç”±å…ƒä¿¡æ¯æ‰©å±•
declare module 'vue-router' {
  interface RouteMeta {
    title?: string
    requiresAuth?: boolean
    roles?: string[]
    permissions?: string[]
    hidden?: boolean
    icon?: string
    breadcrumb?: boolean
    keepAlive?: boolean
  }
}

// ç¯å¢ƒå˜é‡ç±»å‹
interface ImportMetaEnv {
  readonly VITE_BASE_URL: string
  readonly VITE_APP_PORT: string
  readonly VITE_SOURCE_MAP: string
  readonly VITE_ENABLE_MOCK: string
}

interface ImportMeta {
  readonly env: ImportMetaEnv
}
```

### 9.3 è¿è¡Œæ—¶ç±»å‹éªŒè¯

#### Zod Schemaå®šä¹‰
```typescript
// utils/validation.ts
import { z } from 'zod'

// ç”¨æˆ·è¡¨å•éªŒè¯Schema
export const userFormSchema = z.object({
  id: z.number().optional(),
  username: z
    .string()
    .min(3, 'ç”¨æˆ·åè‡³å°‘3ä¸ªå­—ç¬¦')
    .max(50, 'ç”¨æˆ·åæœ€å¤š50ä¸ªå­—ç¬¦')
    .regex(/^[a-zA-Z0-9_]+$/, 'ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿'),
  password: z
    .string()
    .min(6, 'å¯†ç è‡³å°‘6ä¸ªå­—ç¬¦')
    .optional()
    .or(z.literal('')),
  email: z
    .string()
    .email('è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€')
    .optional()
    .or(z.literal('')),
  enable: z.boolean(),
  avatar: z.string().url('è¯·è¾“å…¥æœ‰æ•ˆçš„å¤´åƒURL').optional(),
  realName: z
    .string()
    .max(20, 'çœŸå®å§“åæœ€å¤š20ä¸ªå­—ç¬¦')
    .optional(),
  age: z
    .number()
    .min(1, 'å¹´é¾„å¿…é¡»å¤§äº0')
    .max(150, 'å¹´é¾„å¿…é¡»å°äº150')
    .optional(),
  gender: z.enum(['0', '1', '2']).optional(),
  telephone: z
    .string()
    .regex(/^1[3-9]\d{9}$/, 'è¯·è¾“å…¥æœ‰æ•ˆçš„æ‰‹æœºå·ç ')
    .optional()
    .or(z.literal(''))
})

// ç™»å½•è¡¨å•éªŒè¯Schema
export const loginFormSchema = z.object({
  username: z
    .string()
    .min(1, 'è¯·è¾“å…¥ç”¨æˆ·å'),
  password: z
    .string()
    .min(1, 'è¯·è¾“å…¥å¯†ç ')
})

// åˆ†é¡µå‚æ•°éªŒè¯Schema
export const pageRequestSchema = z.object({
  page: z.number().min(1, 'é¡µç å¿…é¡»å¤§äº0'),
  size: z.number().min(1, 'é¡µé¢å¤§å°å¿…é¡»å¤§äº0').max(100, 'é¡µé¢å¤§å°ä¸èƒ½è¶…è¿‡100'),
  sortBy: z.string().optional()
})

// æ–‡ä»¶ä¸Šä¼ éªŒè¯Schema
export const fileUploadSchema = z.object({
  file: z
    .instanceof(File)
    .refine(file => file.size <= 10 * 1024 * 1024, 'æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10MB')
    .refine(
      file => ['image/jpeg', 'image/png', 'image/gif'].includes(file.type),
      'åªæ”¯æŒ JPEGã€PNGã€GIF æ ¼å¼çš„å›¾ç‰‡'
    )
})

// ç±»å‹æ¨å¯¼
export type UserFormData = z.infer<typeof userFormSchema>
export type LoginFormData = z.infer<typeof loginFormSchema>
export type PageRequestData = z.infer<typeof pageRequestSchema>
export type FileUploadData = z.infer<typeof fileUploadSchema>
```

#### ç±»å‹å®ˆå«å‡½æ•°
```typescript
// utils/typeGuards.ts

// æ£€æŸ¥æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ç”¨æˆ·å¯¹è±¡
export function isValidUser(value: unknown): value is User {
  return (
    typeof value === 'object' &&
    value !== null &&
    'id' in value &&
    'username' in value &&
    typeof (value as any).id === 'number' &&
    typeof (value as any).username === 'string'
  )
}

// æ£€æŸ¥æ˜¯å¦ä¸ºAPIé”™è¯¯å“åº”
export function isApiError(error: unknown): error is ApiError {
  return (
    error instanceof Error &&
    'status' in error &&
    'code' in error &&
    typeof (error as any).status === 'number'
  )
}

// æ£€æŸ¥æ˜¯å¦ä¸ºåˆ†é¡µå“åº”
export function isPageResponse<T>(value: unknown): value is PageResponse<T> {
  return (
    typeof value === 'object' &&
    value !== null &&
    'data' in value &&
    'total' in value &&
    'page' in value &&
    'size' in value &&
    Array.isArray((value as any).data)
  )
}

// æ£€æŸ¥æ˜¯å¦ä¸ºæœ‰æ•ˆçš„æ–‡ä»¶å¯¹è±¡
export function isValidFile(value: unknown): value is File {
  return value instanceof File && value.size > 0
}
```

### 9.4 ç±»å‹å·¥å…·å‡½æ•°

#### å®ç”¨ç±»å‹å·¥å…·
```typescript
// types/utils.ts

// ä½¿å±æ€§å¯é€‰
export type Partial<T> = {
  [P in keyof T]?: T[P]
}

// ä½¿å±æ€§å¿…éœ€
export type Required<T> = {
  [P in keyof T]-?: T[P]
}

// é€‰æ‹©ç‰¹å®šå±æ€§
export type Pick<T, K extends keyof T> = {
  [P in K]: T[P]
}

// æ’é™¤ç‰¹å®šå±æ€§
export type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>

// æ·±åº¦åªè¯»
export type DeepReadonly<T> = {
  readonly [P in keyof T]: T[P] extends object ? DeepReadonly<T[P]> : T[P]
}

// é€’å½’éƒ¨åˆ†ç±»å‹
export type DeepPartial<T> = {
  [P in keyof T]?: T[P] extends object ? DeepPartial<T[P]> : T[P]
}

// æå–æ•°ç»„å…ƒç´ ç±»å‹
export type ArrayElement<T> = T extends (infer U)[] ? U : never

// æå–Promiseè¿”å›ç±»å‹
export type PromiseType<T> = T extends Promise<infer U> ? U : never

// å‡½æ•°å‚æ•°ç±»å‹
export type Parameters<T> = T extends (...args: infer P) => any ? P : never

// å‡½æ•°è¿”å›ç±»å‹
export type ReturnType<T> = T extends (...args: any[]) => infer R ? R : any

// é”®å€¼å¯¹ç±»å‹
export type KeyValuePair<K extends string | number | symbol, V> = {
  [P in K]: V
}

// æ¡ä»¶ç±»å‹
export type If<C extends boolean, T, F> = C extends true ? T : F

// è”åˆç±»å‹è½¬äº¤å‰ç±»å‹
export type UnionToIntersection<U> =
  (U extends any ? (k: U) => void : never) extends ((k: infer I) => void) ? I : never
```

### 9.5 ç±»å‹ç³»ç»Ÿè§„èŒƒè¦ç‚¹

#### å¿…é¡»éµå¾ªçš„è§„èŒƒ
- [ ] **ä¸¥æ ¼æ¨¡å¼**ï¼šå¯ç”¨TypeScriptä¸¥æ ¼æ¨¡å¼æ£€æŸ¥
- [ ] **ç±»å‹ä¼˜å…ˆ**ï¼šä¼˜å…ˆä½¿ç”¨ç±»å‹è€Œéæ¥å£ï¼ˆé™¤ééœ€è¦æ‰©å±•ï¼‰
- [ ] **è¿è¡Œæ—¶éªŒè¯**ï¼šä½¿ç”¨Zodè¿›è¡Œè¡¨å•å’ŒAPIæ•°æ®éªŒè¯
- [ ] **ç±»å‹å®ˆå«**ï¼šä¸ºå¤æ‚ç±»å‹æ£€æŸ¥æä¾›ç±»å‹å®ˆå«å‡½æ•°
- [ ] **æ³›å‹çº¦æŸ**ï¼šåˆç†ä½¿ç”¨æ³›å‹çº¦æŸæé«˜ç±»å‹å®‰å…¨
- [ ] **å·¥å…·ç±»å‹**ï¼šä½¿ç”¨TypeScriptå†…ç½®å·¥å…·ç±»å‹
- [ ] **ç±»å‹å¯¼å‡º**ï¼šç»Ÿä¸€ä»typesç›®å½•å¯¼å‡ºç±»å‹å®šä¹‰

---

## åã€æµ‹è¯•è§„èŒƒ

### 10.1 æµ‹è¯•ç­–ç•¥

#### æµ‹è¯•é‡‘å­—å¡”
```mermaid
graph TB
    A[E2E Tests<br/>ç«¯åˆ°ç«¯æµ‹è¯•<br/>10%] --> B[Integration Tests<br/>é›†æˆæµ‹è¯•<br/>20%]
    B --> C[Unit Tests<br/>å•å…ƒæµ‹è¯•<br/>70%]

    style A fill:#ff9999
    style B fill:#ffcc99
    style C fill:#99ff99
```

### 10.2 å•å…ƒæµ‹è¯•è§„èŒƒ

#### Vitesté…ç½®
```typescript
// vitest.config.ts
import { defineConfig } from 'vitest/config'
import vue from '@vitejs/plugin-vue'
import { fileURLToPath } from 'node:url'

export default defineConfig({
  plugins: [vue()],
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: ['./src/test/setup.ts'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: [
        'node_modules/',
        'src/test/',
        '**/*.d.ts',
        '**/*.config.*',
        '**/types/**'
      ],
      thresholds: {
        global: {
          branches: 80,
          functions: 80,
          lines: 80,
          statements: 80
        }
      }
    }
  },
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url))
    }
  }
})
```

#### ç»„ä»¶æµ‹è¯•ç¤ºä¾‹
```typescript
// src/components/ui/__tests__/Button.test.ts
import { describe, it, expect, vi } from 'vitest'
import { mount } from '@vue/test-utils'
import Button from '../Button.vue'

describe('Button Component', () => {
  it('renders with default props', () => {
    const wrapper = mount(Button, {
      props: {
        label: 'Click me'
      }
    })

    expect(wrapper.text()).toBe('Click me')
    expect(wrapper.classes()).toContain('btn-primary')
    expect(wrapper.classes()).toContain('btn-md')
  })

  it('applies size classes correctly', () => {
    const wrapper = mount(Button, {
      props: {
        label: 'Button',
        size: 'lg'
      }
    })

    expect(wrapper.classes()).toContain('btn-lg')
  })

  it('applies variant classes correctly', () => {
    const wrapper = mount(Button, {
      props: {
        label: 'Button',
        variant: 'danger'
      }
    })

    expect(wrapper.classes()).toContain('btn-danger')
  })

  it('emits click event when clicked', async () => {
    const wrapper = mount(Button, {
      props: {
        label: 'Button'
      }
    })

    await wrapper.trigger('click')

    expect(wrapper.emitted('click')).toBeTruthy()
    expect(wrapper.emitted('click')).toHaveLength(1)
  })

  it('does not emit click when disabled', async () => {
    const wrapper = mount(Button, {
      props: {
        label: 'Button',
        disabled: true
      }
    })

    await wrapper.trigger('click')

    expect(wrapper.emitted('click')).toBeFalsy()
  })

  it('renders slot content', () => {
    const wrapper = mount(Button, {
      slots: {
        default: '<span>Custom Content</span>'
      }
    })

    expect(wrapper.html()).toContain('<span>Custom Content</span>')
  })
})
```

#### Composableæµ‹è¯•ç¤ºä¾‹
```typescript
// src/composables/user/__tests__/useUserQuery.test.ts
import { describe, it, expect, vi, beforeEach } from 'vitest'
import { useUserQuery } from '../useUserQuery'
import { nextTick } from 'vue'

// Mock API client
vi.mock('@/api/client', () => ({
  default: {
    GET: vi.fn()
  }
}))

describe('useUserQuery', () => {
  beforeEach(() => {
    vi.clearAllMocks()
  })

  it('initializes with default state', () => {
    const { users, loading, error, total } = useUserQuery()

    expect(users.value).toEqual([])
    expect(loading.value).toBe(false)
    expect(error.value).toBe(null)
    expect(total.value).toBe(0)
  })

  it('fetches users successfully', async () => {
    const mockUsers = [
      { id: 1, username: 'user1', email: 'user1@example.com' },
      { id: 2, username: 'user2', email: 'user2@example.com' }
    ]

    const mockResponse = {
      data: {
        data: mockUsers,
        total: 2
      }
    }

    const client = await import('@/api/client')
    vi.mocked(client.default.GET).mockResolvedValue(mockResponse)

    const { users, loading, total, fetchUsers } = useUserQuery()

    const promise = fetchUsers()

    // Loading state should be true during fetch
    expect(loading.value).toBe(true)

    await promise
    await nextTick()

    // After fetch completes
    expect(loading.value).toBe(false)
    expect(users.value).toEqual(mockUsers)
    expect(total.value).toBe(2)
  })

  it('handles fetch error correctly', async () => {
    const client = await import('@/api/client')
    vi.mocked(client.default.GET).mockRejectedValue(new Error('API Error'))

    const { users, loading, error, fetchUsers } = useUserQuery()

    await expect(fetchUsers()).rejects.toThrow('API Error')

    expect(loading.value).toBe(false)
    expect(error.value).toBe('è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥')
    expect(users.value).toEqual([])
  })
})
```

### 10.3 é›†æˆæµ‹è¯•è§„èŒƒ

#### é¡µé¢ç»„ä»¶é›†æˆæµ‹è¯•
```typescript
// src/views/__tests__/UserManagementPage.test.ts
import { describe, it, expect, vi, beforeEach } from 'vitest'
import { mount } from '@vue/test-utils'
import { createTestingPinia } from '@pinia/testing'
import UserManagementPage from '../UserManagementPage.vue'

describe('UserManagementPage', () => {
  beforeEach(() => {
    vi.clearAllMocks()
  })

  it('renders user list correctly', async () => {
    const wrapper = mount(UserManagementPage, {
      global: {
        plugins: [
          createTestingPinia({
            createSpy: vi.fn
          })
        ]
      }
    })

    expect(wrapper.find('[data-testid="user-list"]').exists()).toBe(true)
    expect(wrapper.find('[data-testid="create-user-btn"]').exists()).toBe(true)
  })

  it('opens create user modal when button clicked', async () => {
    const wrapper = mount(UserManagementPage, {
      global: {
        plugins: [createTestingPinia()]
      }
    })

    const createBtn = wrapper.find('[data-testid="create-user-btn"]')
    await createBtn.trigger('click')

    expect(wrapper.find('[data-testid="user-form-modal"]').exists()).toBe(true)
  })
})
```

### 10.4 E2Eæµ‹è¯•è§„èŒƒ

#### Playwrighté…ç½®
```typescript
// playwright.config.ts
import { defineConfig, devices } from '@playwright/test'

export default defineConfig({
  testDir: './e2e',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: 'html',
  use: {
    baseURL: 'http://localhost:5173',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure'
  },
  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] }
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] }
    },
    {
      name: 'webkit',
      use: { ...devices['Desktop Safari'] }
    },
    {
      name: 'Mobile Chrome',
      use: { ...devices['Pixel 5'] }
    }
  ],
  webServer: {
    command: 'npm run dev',
    url: 'http://localhost:5173',
    reuseExistingServer: !process.env.CI
  }
})
```

#### E2Eæµ‹è¯•ç¤ºä¾‹
```typescript
// e2e/user-management.spec.ts
import { test, expect } from '@playwright/test'

test.describe('User Management', () => {
  test.beforeEach(async ({ page }) => {
    // ç™»å½•
    await page.goto('/login')
    await page.fill('[data-testid="username-input"]', 'admin')
    await page.fill('[data-testid="password-input"]', 'admin')
    await page.click('[data-testid="login-btn"]')

    // ç­‰å¾…è·³è½¬åˆ°ç”¨æˆ·ç®¡ç†é¡µé¢
    await page.waitForURL('/dashboard/users')
  })

  test('should display user list', async ({ page }) => {
    await expect(page.locator('[data-testid="user-list"]')).toBeVisible()
    await expect(page.locator('[data-testid="user-item"]')).toHaveCount.greaterThan(0)
  })

  test('should create new user', async ({ page }) => {
    // ç‚¹å‡»åˆ›å»ºç”¨æˆ·æŒ‰é’®
    await page.click('[data-testid="create-user-btn"]')

    // å¡«å†™ç”¨æˆ·è¡¨å•
    await page.fill('[data-testid="username-input"]', 'testuser')
    await page.fill('[data-testid="email-input"]', 'test@example.com')
    await page.check('[data-testid="enable-checkbox"]')

    // æäº¤è¡¨å•
    await page.click('[data-testid="submit-btn"]')

    // éªŒè¯æˆåŠŸæ¶ˆæ¯
    await expect(page.locator('[data-testid="success-alert"]')).toBeVisible()
    await expect(page.locator('[data-testid="success-alert"]')).toContainText('ç”¨æˆ·åˆ›å»ºæˆåŠŸ')

    // éªŒè¯ç”¨æˆ·å‡ºç°åœ¨åˆ—è¡¨ä¸­
    await expect(page.locator('[data-testid="user-item"]').filter({ hasText: 'testuser' })).toBeVisible()
  })

  test('should edit existing user', async ({ page }) => {
    // ç‚¹å‡»ç¬¬ä¸€ä¸ªç”¨æˆ·çš„ç¼–è¾‘æŒ‰é’®
    await page.click('[data-testid="user-item"]:first-child [data-testid="edit-btn"]')

    // ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯
    await page.fill('[data-testid="email-input"]', 'updated@example.com')

    // æäº¤è¡¨å•
    await page.click('[data-testid="submit-btn"]')

    // éªŒè¯æˆåŠŸæ¶ˆæ¯
    await expect(page.locator('[data-testid="success-alert"]')).toContainText('ç”¨æˆ·æ›´æ–°æˆåŠŸ')
  })

  test('should delete user', async ({ page }) => {
    // ç‚¹å‡»åˆ é™¤æŒ‰é’®
    await page.click('[data-testid="user-item"]:first-child [data-testid="delete-btn"]')

    // ç¡®è®¤åˆ é™¤
    await page.click('[data-testid="confirm-delete-btn"]')

    // éªŒè¯æˆåŠŸæ¶ˆæ¯
    await expect(page.locator('[data-testid="success-alert"]')).toContainText('ç”¨æˆ·åˆ é™¤æˆåŠŸ')
  })
})
```

### 10.5 æµ‹è¯•å·¥å…·å‡½æ•°

#### æµ‹è¯•è¾…åŠ©å·¥å…·
```typescript
// src/test/utils.ts
import { mount, VueWrapper } from '@vue/test-utils'
import { createTestingPinia } from '@pinia/testing'
import { vi } from 'vitest'
import type { ComponentMountingOptions } from '@vue/test-utils'

/**
 * åˆ›å»ºæµ‹è¯•ç”¨çš„Piniaå®ä¾‹
 */
export function createTestPinia() {
  return createTestingPinia({
    createSpy: vi.fn,
    stubActions: false
  })
}

/**
 * æŒ‚è½½ç»„ä»¶çš„è¾…åŠ©å‡½æ•°
 */
export function mountComponent<T>(
  component: T,
  options: ComponentMountingOptions<T> = {}
): VueWrapper<any> {
  return mount(component, {
    global: {
      plugins: [createTestPinia()],
      ...options.global
    },
    ...options
  })
}

/**
 * ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ
 */
export async function waitForAsync() {
  await new Promise(resolve => setTimeout(resolve, 0))
}

/**
 * æ¨¡æ‹ŸAPIå“åº”
 */
export function mockApiResponse<T>(data: T, delay = 0) {
  return new Promise<{ data: T }>(resolve => {
    setTimeout(() => {
      resolve({ data })
    }, delay)
  })
}

/**
 * æ¨¡æ‹ŸAPIé”™è¯¯
 */
export function mockApiError(message = 'API Error', status = 500) {
  return Promise.reject(new Error(message))
}

/**
 * åˆ›å»ºæ¨¡æ‹Ÿç”¨æˆ·æ•°æ®
 */
export function createMockUser(overrides = {}) {
  return {
    id: 1,
    username: 'testuser',
    email: 'test@example.com',
    enable: true,
    avatar: 'https://example.com/avatar.jpg',
    roles: [],
    createdAt: '2024-01-01T00:00:00Z',
    ...overrides
  }
}
```

### 10.6 æµ‹è¯•è§„èŒƒè¦ç‚¹

#### å¿…é¡»éµå¾ªçš„è§„èŒƒ
- [ ] **æµ‹è¯•è¦†ç›–ç‡**ï¼šå•å…ƒæµ‹è¯•è¦†ç›–ç‡ â‰¥ 85%
- [ ] **æµ‹è¯•å‘½å**ï¼šä½¿ç”¨æè¿°æ€§çš„æµ‹è¯•åç§°
- [ ] **æµ‹è¯•éš”ç¦»**ï¼šæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ç›¸äº’ç‹¬ç«‹
- [ ] **Mockç­–ç•¥**ï¼šåˆç†ä½¿ç”¨Mocké¿å…å¤–éƒ¨ä¾èµ–
- [ ] **æ–­è¨€æ˜ç¡®**ï¼šä½¿ç”¨å…·ä½“çš„æ–­è¨€è€Œéé€šç”¨æ–­è¨€
- [ ] **æµ‹è¯•æ•°æ®**ï¼šä½¿ç”¨å·¥å‚å‡½æ•°åˆ›å»ºæµ‹è¯•æ•°æ®
- [ ] **å¼‚æ­¥æµ‹è¯•**ï¼šæ­£ç¡®å¤„ç†å¼‚æ­¥æ“ä½œçš„æµ‹è¯•

---

## åä¸€ã€æ€§èƒ½ä¼˜åŒ–è§„èŒƒ

### 11.1 ä»£ç åˆ†å‰²ä¸æ‡’åŠ è½½

#### è·¯ç”±çº§ä»£ç åˆ†å‰²
```typescript
// router/modules/dashboard.ts
import type { RouteRecordRaw } from 'vue-router'

const dashboardRoutes: RouteRecordRaw = {
  path: '/dashboard',
  name: 'dashboard',
  component: () => import('@/components/layout/Dashboard.vue'),
  children: [
    {
      path: 'users',
      name: 'users',
      // è·¯ç”±çº§æ‡’åŠ è½½
      component: () => import('@/views/UserManagementPage.vue'),
      meta: { title: 'ç”¨æˆ·ç®¡ç†' }
    },
    {
      path: 'knowledge',
      name: 'knowledge',
      // ä½¿ç”¨webpackChunkNameæ³¨é‡ŠæŒ‡å®šchunkåç§°
      component: () => import(
        /* webpackChunkName: "knowledge" */
        '@/views/KnowledgeManagementPage.vue'
      ),
      meta: { title: 'çŸ¥è¯†åº“ç®¡ç†' }
    }
  ]
}
```

#### ç»„ä»¶çº§æ‡’åŠ è½½
```vue
<template>
  <div class="user-management">
    <Suspense>
      <template #default>
        <AsyncDataTable
          v-if="showTable"
          :data="users"
          :columns="columns"
        />
      </template>
      <template #fallback>
        <TableSkeleton />
      </template>
    </Suspense>
  </div>
</template>

<script setup lang="ts">
import { defineAsyncComponent, ref } from 'vue'

// å¼‚æ­¥ç»„ä»¶æ‡’åŠ è½½
const AsyncDataTable = defineAsyncComponent({
  loader: () => import('@/components/tables/DataTable.vue'),
  loadingComponent: () => import('@/components/ui/Loading.vue'),
  errorComponent: () => import('@/components/ui/Error.vue'),
  delay: 200,
  timeout: 3000
})

const TableSkeleton = defineAsyncComponent(
  () => import('@/components/ui/TableSkeleton.vue')
)

const showTable = ref(false)

// å»¶è¿ŸåŠ è½½è¡¨æ ¼ç»„ä»¶
setTimeout(() => {
  showTable.value = true
}, 100)
</script>
```

### 11.2 è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–

#### å¤§åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨
```vue
<template>
  <div
    ref="containerRef"
    class="virtual-list"
    :style="{ height: `${containerHeight}px` }"
    @scroll="handleScroll"
  >
    <div
      class="virtual-list-phantom"
      :style="{ height: `${totalHeight}px` }"
    />
    <div
      class="virtual-list-content"
      :style="{ transform: `translateY(${offsetY}px)` }"
    >
      <div
        v-for="item in visibleItems"
        :key="item.id"
        class="virtual-list-item"
        :style="{ height: `${itemHeight}px` }"
      >
        <slot :item="item" :index="item.index" />
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted, onUnmounted } from 'vue'

interface Props {
  items: any[]
  itemHeight: number
  containerHeight: number
  buffer?: number
}

const props = withDefaults(defineProps<Props>(), {
  buffer: 5
})

const containerRef = ref<HTMLElement>()
const scrollTop = ref(0)

// è®¡ç®—æ€»é«˜åº¦
const totalHeight = computed(() => props.items.length * props.itemHeight)

// è®¡ç®—å¯è§åŒºåŸŸçš„èµ·å§‹å’Œç»“æŸç´¢å¼•
const startIndex = computed(() => {
  return Math.max(0, Math.floor(scrollTop.value / props.itemHeight) - props.buffer)
})

const endIndex = computed(() => {
  const visibleCount = Math.ceil(props.containerHeight / props.itemHeight)
  return Math.min(
    props.items.length - 1,
    startIndex.value + visibleCount + props.buffer
  )
})

// è®¡ç®—åç§»é‡
const offsetY = computed(() => startIndex.value * props.itemHeight)

// å¯è§é¡¹ç›®
const visibleItems = computed(() => {
  return props.items
    .slice(startIndex.value, endIndex.value + 1)
    .map((item, index) => ({
      ...item,
      index: startIndex.value + index
    }))
})

// æ»šåŠ¨å¤„ç†
const handleScroll = (event: Event) => {
  const target = event.target as HTMLElement
  scrollTop.value = target.scrollTop
}

// é˜²æŠ–æ»šåŠ¨å¤„ç†
let scrollTimer: number | null = null
const debouncedScroll = (event: Event) => {
  if (scrollTimer) {
    cancelAnimationFrame(scrollTimer)
  }
  scrollTimer = requestAnimationFrame(() => {
    handleScroll(event)
  })
}

onMounted(() => {
  containerRef.value?.addEventListener('scroll', debouncedScroll, { passive: true })
})

onUnmounted(() => {
  containerRef.value?.removeEventListener('scroll', debouncedScroll)
  if (scrollTimer) {
    cancelAnimationFrame(scrollTimer)
  }
})
</script>

<style scoped>
.virtual-list {
  overflow-y: auto;
  position: relative;
}

.virtual-list-phantom {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  z-index: -1;
}

.virtual-list-content {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
}

.virtual-list-item {
  box-sizing: border-box;
}
</style>
```

### 11.3 å›¾ç‰‡ä¼˜åŒ–

#### å›¾ç‰‡æ‡’åŠ è½½å’Œå‹ç¼©
```vue
<template>
  <div class="image-container">
    <img
      v-if="isLoaded"
      :src="optimizedSrc"
      :alt="alt"
      class="image"
      @load="handleLoad"
      @error="handleError"
    />
    <div v-else-if="isLoading" class="image-placeholder">
      <LoadingSpinner />
    </div>
    <div v-else-if="hasError" class="image-error">
      <ImageErrorIcon />
      <span>å›¾ç‰‡åŠ è½½å¤±è´¥</span>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue'
import { useIntersectionObserver } from '@vueuse/core'

interface Props {
  src: string
  alt: string
  width?: number
  height?: number
  quality?: number
  lazy?: boolean
}

const props = withDefaults(defineProps<Props>(), {
  quality: 80,
  lazy: true
})

const containerRef = ref<HTMLElement>()
const isLoading = ref(false)
const isLoaded = ref(false)
const hasError = ref(false)
const shouldLoad = ref(!props.lazy)

// å›¾ç‰‡ä¼˜åŒ–å¤„ç†
const optimizedSrc = computed(() => {
  if (!props.src) return ''

  // å¦‚æœæ˜¯å¤–éƒ¨å›¾ç‰‡ï¼Œç›´æ¥è¿”å›
  if (props.src.startsWith('http')) {
    return props.src
  }

  // å†…éƒ¨å›¾ç‰‡è¿›è¡Œä¼˜åŒ–å¤„ç†
  const params = new URLSearchParams()
  if (props.width) params.set('w', props.width.toString())
  if (props.height) params.set('h', props.height.toString())
  if (props.quality) params.set('q', props.quality.toString())

  return `${props.src}?${params.toString()}`
})

// æ‡’åŠ è½½è§‚å¯Ÿå™¨
const { stop } = useIntersectionObserver(
  containerRef,
  ([{ isIntersecting }]) => {
    if (isIntersecting && !shouldLoad.value) {
      shouldLoad.value = true
      loadImage()
      stop()
    }
  },
  { threshold: 0.1 }
)

// åŠ è½½å›¾ç‰‡
const loadImage = () => {
  if (isLoading.value || isLoaded.value) return

  isLoading.value = true
  hasError.value = false

  const img = new Image()
  img.onload = () => {
    isLoaded.value = true
    isLoading.value = false
  }
  img.onerror = () => {
    hasError.value = true
    isLoading.value = false
  }
  img.src = optimizedSrc.value
}

const handleLoad = () => {
  isLoaded.value = true
  isLoading.value = false
}

const handleError = () => {
  hasError.value = true
  isLoading.value = false
}

onMounted(() => {
  if (shouldLoad.value) {
    loadImage()
  }
})
</script>
```

#### å›¾ç‰‡å‹ç¼©å·¥å…·
```typescript
// utils/imageUtils.ts
import Compressor from 'compressorjs'

/**
 * å‹ç¼©å›¾ç‰‡æ–‡ä»¶
 * @param file åŸå§‹æ–‡ä»¶
 * @param options å‹ç¼©é€‰é¡¹
 */
export function compressImage(
  file: File,
  options: {
    quality?: number
    maxWidth?: number
    maxHeight?: number
    convertSize?: number
  } = {}
): Promise<File> {
  return new Promise((resolve, reject) => {
    new Compressor(file, {
      quality: options.quality || 0.8,
      maxWidth: options.maxWidth || 1920,
      maxHeight: options.maxHeight || 1080,
      convertSize: options.convertSize || 1000000, // 1MB
      success: (result) => {
        resolve(result as File)
      },
      error: (error) => {
        reject(error)
      }
    })
  })
}

/**
 * ç”Ÿæˆå›¾ç‰‡ç¼©ç•¥å›¾
 * @param file å›¾ç‰‡æ–‡ä»¶
 * @param size ç¼©ç•¥å›¾å°ºå¯¸
 */
export function generateThumbnail(
  file: File,
  size: { width: number; height: number }
): Promise<string> {
  return new Promise((resolve, reject) => {
    const canvas = document.createElement('canvas')
    const ctx = canvas.getContext('2d')
    const img = new Image()

    img.onload = () => {
      canvas.width = size.width
      canvas.height = size.height

      // è®¡ç®—ç¼©æ”¾æ¯”ä¾‹
      const scale = Math.min(
        size.width / img.width,
        size.height / img.height
      )

      const scaledWidth = img.width * scale
      const scaledHeight = img.height * scale
      const x = (size.width - scaledWidth) / 2
      const y = (size.height - scaledHeight) / 2

      ctx?.drawImage(img, x, y, scaledWidth, scaledHeight)

      canvas.toBlob((blob) => {
        if (blob) {
          const url = URL.createObjectURL(blob)
          resolve(url)
        } else {
          reject(new Error('ç”Ÿæˆç¼©ç•¥å›¾å¤±è´¥'))
        }
      }, 'image/jpeg', 0.8)
    }

    img.onerror = () => {
      reject(new Error('å›¾ç‰‡åŠ è½½å¤±è´¥'))
    }

    img.src = URL.createObjectURL(file)
  })
}
```

### 11.4 ç¼“å­˜ç­–ç•¥

#### HTTPç¼“å­˜é…ç½®
```typescript
// api/cache.ts
import { useStorage } from '@vueuse/core'

interface CacheItem<T> {
  data: T
  timestamp: number
  ttl: number
}

/**
 * APIç¼“å­˜ç®¡ç†å™¨
 */
export class ApiCache {
  private cache = new Map<string, CacheItem<any>>()
  private storage = useStorage('api-cache', {}, localStorage)

  /**
   * è®¾ç½®ç¼“å­˜
   * @param key ç¼“å­˜é”®
   * @param data ç¼“å­˜æ•°æ®
   * @param ttl è¿‡æœŸæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
   */
  set<T>(key: string, data: T, ttl = 5 * 60 * 1000): void {
    const item: CacheItem<T> = {
      data,
      timestamp: Date.now(),
      ttl
    }

    this.cache.set(key, item)

    // æŒä¹…åŒ–åˆ°localStorage
    this.storage.value[key] = item
  }

  /**
   * è·å–ç¼“å­˜
   * @param key ç¼“å­˜é”®
   */
  get<T>(key: string): T | null {
    let item = this.cache.get(key)

    // å¦‚æœå†…å­˜ä¸­æ²¡æœ‰ï¼Œå°è¯•ä»localStorageè·å–
    if (!item && this.storage.value[key]) {
      item = this.storage.value[key]
      this.cache.set(key, item)
    }

    if (!item) return null

    // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
    if (Date.now() - item.timestamp > item.ttl) {
      this.delete(key)
      return null
    }

    return item.data
  }

  /**
   * åˆ é™¤ç¼“å­˜
   * @param key ç¼“å­˜é”®
   */
  delete(key: string): void {
    this.cache.delete(key)
    delete this.storage.value[key]
  }

  /**
   * æ¸…ç©ºæ‰€æœ‰ç¼“å­˜
   */
  clear(): void {
    this.cache.clear()
    this.storage.value = {}
  }

  /**
   * ç”Ÿæˆç¼“å­˜é”®
   * @param url è¯·æ±‚URL
   * @param params è¯·æ±‚å‚æ•°
   */
  generateKey(url: string, params?: Record<string, any>): string {
    const paramStr = params ? JSON.stringify(params) : ''
    return `${url}:${paramStr}`
  }
}

export const apiCache = new ApiCache()
```

#### ç»„ä»¶çº§ç¼“å­˜
```vue
<template>
  <KeepAlive :include="cachedComponents" :max="10">
    <component :is="currentComponent" />
  </KeepAlive>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import { useRoute } from 'vue-router'

const route = useRoute()

// éœ€è¦ç¼“å­˜çš„ç»„ä»¶åˆ—è¡¨
const cachedComponents = ref([
  'UserManagementPage',
  'DepartmentManagementPage',
  'RoleManagementPage'
])

const currentComponent = computed(() => {
  // æ ¹æ®è·¯ç”±åŠ¨æ€ç¡®å®šç»„ä»¶
  return route.meta.component || 'DefaultComponent'
})

// åŠ¨æ€æ·»åŠ /ç§»é™¤ç¼“å­˜ç»„ä»¶
const addToCache = (componentName: string) => {
  if (!cachedComponents.value.includes(componentName)) {
    cachedComponents.value.push(componentName)
  }
}

const removeFromCache = (componentName: string) => {
  const index = cachedComponents.value.indexOf(componentName)
  if (index > -1) {
    cachedComponents.value.splice(index, 1)
  }
}
</script>
```

### 11.5 æ€§èƒ½ç›‘æ§

#### æ€§èƒ½æŒ‡æ ‡æ”¶é›†
```typescript
// utils/performance.ts
interface PerformanceMetrics {
  fcp: number // First Contentful Paint
  lcp: number // Largest Contentful Paint
  fid: number // First Input Delay
  cls: number // Cumulative Layout Shift
  ttfb: number // Time to First Byte
}

/**
 * æ€§èƒ½ç›‘æ§å·¥å…·
 */
export class PerformanceMonitor {
  private metrics: Partial<PerformanceMetrics> = {}

  constructor() {
    this.observePerformance()
  }

  private observePerformance() {
    // è§‚å¯ŸFCPå’ŒLCP
    if ('PerformanceObserver' in window) {
      const paintObserver = new PerformanceObserver((list) => {
        for (const entry of list.getEntries()) {
          if (entry.name === 'first-contentful-paint') {
            this.metrics.fcp = entry.startTime
          }
        }
      })
      paintObserver.observe({ entryTypes: ['paint'] })

      const lcpObserver = new PerformanceObserver((list) => {
        const entries = list.getEntries()
        const lastEntry = entries[entries.length - 1]
        this.metrics.lcp = lastEntry.startTime
      })
      lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] })

      // è§‚å¯ŸFID
      const fidObserver = new PerformanceObserver((list) => {
        for (const entry of list.getEntries()) {
          this.metrics.fid = entry.processingStart - entry.startTime
        }
      })
      fidObserver.observe({ entryTypes: ['first-input'] })

      // è§‚å¯ŸCLS
      const clsObserver = new PerformanceObserver((list) => {
        let clsValue = 0
        for (const entry of list.getEntries()) {
          if (!entry.hadRecentInput) {
            clsValue += entry.value
          }
        }
        this.metrics.cls = clsValue
      })
      clsObserver.observe({ entryTypes: ['layout-shift'] })
    }

    // è®¡ç®—TTFB
    window.addEventListener('load', () => {
      const navigation = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming
      this.metrics.ttfb = navigation.responseStart - navigation.requestStart
    })
  }

  /**
   * è·å–æ€§èƒ½æŒ‡æ ‡
   */
  getMetrics(): Partial<PerformanceMetrics> {
    return { ...this.metrics }
  }

  /**
   * ä¸ŠæŠ¥æ€§èƒ½æ•°æ®
   */
  report() {
    // å‘é€æ€§èƒ½æ•°æ®åˆ°ç›‘æ§æœåŠ¡
    console.log('Performance Metrics:', this.metrics)
  }
}

// åˆ›å»ºå…¨å±€æ€§èƒ½ç›‘æ§å®ä¾‹
export const performanceMonitor = new PerformanceMonitor()
```

### 11.6 æ€§èƒ½ä¼˜åŒ–è§„èŒƒè¦ç‚¹

#### å¿…é¡»éµå¾ªçš„è§„èŒƒ
- [ ] **ä»£ç åˆ†å‰²**ï¼šæŒ‰è·¯ç”±å’ŒåŠŸèƒ½è¿›è¡Œä»£ç åˆ†å‰²
- [ ] **æ‡’åŠ è½½**ï¼šéå…³é”®ç»„ä»¶ä½¿ç”¨æ‡’åŠ è½½
- [ ] **è™šæ‹Ÿæ»šåŠ¨**ï¼šå¤§åˆ—è¡¨ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨æŠ€æœ¯
- [ ] **å›¾ç‰‡ä¼˜åŒ–**ï¼šå›¾ç‰‡å‹ç¼©å’Œæ‡’åŠ è½½
- [ ] **ç¼“å­˜ç­–ç•¥**ï¼šåˆç†ä½¿ç”¨HTTPç¼“å­˜å’Œç»„ä»¶ç¼“å­˜
- [ ] **æ€§èƒ½ç›‘æ§**ï¼šç›‘æ§å…³é”®æ€§èƒ½æŒ‡æ ‡
- [ ] **Bundleåˆ†æ**ï¼šå®šæœŸåˆ†ææ‰“åŒ…ä½“ç§¯å’Œä¾èµ–

---

## åäºŒã€ä»£ç è´¨é‡è§„èŒƒ

### 12.1 Biomeé…ç½®

#### ä»£ç æ ¼å¼åŒ–å’Œæ£€æŸ¥
```json
// biome.json
{
  "$schema": "https://biomejs.dev/schemas/1.9.4/schema.json",
  "vcs": {
    "enabled": true,
    "clientKind": "git",
    "useIgnoreFile": true
  },
  "files": {
    "ignoreUnknown": false,
    "ignore": ["api/schema/**", "public"]
  },
  "formatter": {
    "enabled": true,
    "indentStyle": "tab"
  },
  "organizeImports": {
    "enabled": true
  },
  "linter": {
    "enabled": true,
    "rules": {
      "recommended": true,
      "style": {
        "noNonNullAssertion": "off",
        "noUnusedTemplateLiteral": "off"
      }
    }
  },
  "javascript": {
    "formatter": {
      "quoteStyle": "double"
    }
  },
  "overrides": [
    {
      "include": ["*.vue"],
      "linter": {
        "rules": {
          "style": {
            "useConst": "off",
            "useImportType": "off"
          }
        }
      }
    }
  ]
}
```

### 12.2 Git Hooksé…ç½®

#### Huskyé¢„æäº¤æ£€æŸ¥
```json
// package.json
{
  "scripts": {
    "prepare": "husky install",
    "lint": "biome lint --write .",
    "format": "biome format --write .",
    "check": "biome check --write .",
    "type-check": "vue-tsc --noEmit"
  },
  "lint-staged": {
    "*.{js,ts,vue}": [
      "biome check --write --no-errors-on-unmatched",
      "git add"
    ],
    "*.{json,md}": [
      "biome format --write",
      "git add"
    ]
  }
}
```

```bash
#!/bin/sh
# .husky/pre-commit
. "$(dirname "$0")/_/husky.sh"

# è¿è¡Œç±»å‹æ£€æŸ¥
npm run type-check

# è¿è¡Œä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–
npx lint-staged

# è¿è¡Œæµ‹è¯•
npm run test:unit
```

### 12.3 ä»£ç å®¡æŸ¥æ¸…å•

#### Pull Requestæ£€æŸ¥æ¸…å•
```markdown
## ä»£ç å®¡æŸ¥æ¸…å•

### åŠŸèƒ½æ€§
- [ ] åŠŸèƒ½æ˜¯å¦æŒ‰éœ€æ±‚æ­£ç¡®å®ç°
- [ ] æ˜¯å¦æœ‰å……åˆ†çš„é”™è¯¯å¤„ç†
- [ ] è¾¹ç•Œæƒ…å†µæ˜¯å¦è€ƒè™‘å‘¨å…¨
- [ ] ç”¨æˆ·ä½“éªŒæ˜¯å¦è‰¯å¥½

### ä»£ç è´¨é‡
- [ ] ä»£ç æ˜¯å¦éµå¾ªé¡¹ç›®è§„èŒƒ
- [ ] å˜é‡å’Œå‡½æ•°å‘½åæ˜¯å¦æ¸…æ™°
- [ ] æ˜¯å¦æœ‰é‡å¤ä»£ç éœ€è¦æå–
- [ ] å¤æ‚é€»è¾‘æ˜¯å¦æœ‰æ³¨é‡Šè¯´æ˜

### æ€§èƒ½
- [ ] æ˜¯å¦æœ‰æ€§èƒ½é—®é¢˜
- [ ] æ˜¯å¦æ­£ç¡®ä½¿ç”¨ç¼“å­˜
- [ ] å¤§åˆ—è¡¨æ˜¯å¦ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
- [ ] å›¾ç‰‡æ˜¯å¦è¿›è¡Œä¼˜åŒ–

### å®‰å…¨æ€§
- [ ] ç”¨æˆ·è¾“å…¥æ˜¯å¦è¿›è¡ŒéªŒè¯
- [ ] æ˜¯å¦æœ‰XSSé£é™©
- [ ] æ•æ„Ÿä¿¡æ¯æ˜¯å¦æ­£ç¡®å¤„ç†
- [ ] APIè°ƒç”¨æ˜¯å¦å®‰å…¨

### æµ‹è¯•
- [ ] æ˜¯å¦æœ‰å……åˆ†çš„å•å…ƒæµ‹è¯•
- [ ] æµ‹è¯•è¦†ç›–ç‡æ˜¯å¦è¾¾æ ‡
- [ ] æ˜¯å¦æœ‰é›†æˆæµ‹è¯•
- [ ] æµ‹è¯•ç”¨ä¾‹æ˜¯å¦è¦†ç›–è¾¹ç•Œæƒ…å†µ

### æ–‡æ¡£
- [ ] æ˜¯å¦æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] å¤æ‚ç»„ä»¶æ˜¯å¦æœ‰ä½¿ç”¨ç¤ºä¾‹
- [ ] APIå˜æ›´æ˜¯å¦æœ‰è¯´æ˜
- [ ] æ˜¯å¦æ›´æ–°CHANGELOG
```

### 12.4 ä»£ç è§„èŒƒè¦ç‚¹

#### å‘½åè§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„å‘½å
const userName = 'john_doe'
const isUserActive = true
const getUserById = (id: number) => { /* ... */ }
const UserProfileComponent = defineComponent({ /* ... */ })

// âŒ é”™è¯¯çš„å‘½å
const u = 'john_doe'
const flag = true
const getData = (x: number) => { /* ... */ }
const component1 = defineComponent({ /* ... */ })
```

#### å‡½æ•°è®¾è®¡è§„èŒƒ
```typescript
// âœ… æ­£ç¡®ï¼šå•ä¸€èŒè´£ï¼Œå‚æ•°æ˜ç¡®
function validateUserEmail(email: string): boolean {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
  return emailRegex.test(email)
}

function formatUserDisplayName(user: User): string {
  return user.realName || user.username
}

// âŒ é”™è¯¯ï¼šèŒè´£ä¸æ˜ç¡®ï¼Œå‚æ•°è¿‡å¤š
function processUser(
  user: any,
  validate: boolean,
  format: boolean,
  save: boolean,
  notify: boolean
) {
  // åšå¤ªå¤šäº‹æƒ…çš„å‡½æ•°
}
```

#### ç»„ä»¶è®¾è®¡è§„èŒƒ
```vue
<!-- âœ… æ­£ç¡®ï¼šæ¸…æ™°çš„Propså®šä¹‰å’Œäº‹ä»¶å¤„ç† -->
<template>
  <div class="user-card">
    <img :src="user.avatar" :alt="`${user.username}çš„å¤´åƒ`" />
    <h3>{{ user.username }}</h3>
    <button @click="handleEdit">ç¼–è¾‘</button>
  </div>
</template>

<script setup lang="ts">
interface Props {
  user: User
}

interface Emits {
  edit: [user: User]
}

const props = defineProps<Props>()
const emit = defineEmits<Emits>()

const handleEdit = () => {
  emit('edit', props.user)
}
</script>

<!-- âŒ é”™è¯¯ï¼šPropsç±»å‹ä¸æ˜ç¡®ï¼Œäº‹ä»¶å¤„ç†ä¸è§„èŒƒ -->
<template>
  <div>
    <img :src="data.img" />
    <h3>{{ data.name }}</h3>
    <button @click="$emit('click', data)">ç¼–è¾‘</button>
  </div>
</template>

<script setup lang="ts">
const props = defineProps(['data'])
const emit = defineEmits(['click'])
</script>
```

### 12.5 è´¨é‡ä¿è¯æµç¨‹

#### å¼€å‘æµç¨‹
```mermaid
graph LR
    A[å¼€å‘] --> B[è‡ªæµ‹]
    B --> C[ä»£ç æ£€æŸ¥]
    C --> D[å•å…ƒæµ‹è¯•]
    D --> E[æäº¤PR]
    E --> F[ä»£ç å®¡æŸ¥]
    F --> G[é›†æˆæµ‹è¯•]
    G --> H[åˆå¹¶ä»£ç ]
```

#### è´¨é‡é—¨ç¦
- **ä»£ç è¦†ç›–ç‡** â‰¥ 85%
- **Biomeæ£€æŸ¥** æ— é”™è¯¯
- **TypeScriptç¼–è¯‘** æ— é”™è¯¯
- **å•å…ƒæµ‹è¯•** å…¨éƒ¨é€šè¿‡
- **ä»£ç å®¡æŸ¥** è‡³å°‘1äººå®¡æ‰¹
- **é›†æˆæµ‹è¯•** å…¨éƒ¨é€šè¿‡

---

## åä¸‰ã€æ„å»ºä¸éƒ¨ç½²è§„èŒƒ

### 13.1 æ„å»ºä¼˜åŒ–

#### Viteæ„å»ºé…ç½®ä¼˜åŒ–
```typescript
// vite.config.ts
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { resolve } from 'path'
import { visualizer } from 'rollup-plugin-visualizer'

export default defineConfig({
  plugins: [
    vue(),
    // Bundleåˆ†ææ’ä»¶
    visualizer({
      filename: 'dist/stats.html',
      open: true,
      gzipSize: true
    })
  ],
  build: {
    // ç”Ÿäº§ç¯å¢ƒç§»é™¤console
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true,
        drop_debugger: true
      }
    },
    // ä»£ç åˆ†å‰²
    rollupOptions: {
      output: {
        manualChunks: {
          // ç¬¬ä¸‰æ–¹åº“åˆ†ç¦»
          vendor: ['vue', 'vue-router', 'pinia'],
          ui: ['flowbite', '@tailwindcss/vite'],
          utils: ['dayjs', 'lodash-es', 'zod']
        },
        // æ–‡ä»¶å‘½å
        chunkFileNames: 'js/[name]-[hash].js',
        entryFileNames: 'js/[name]-[hash].js',
        assetFileNames: (assetInfo) => {
          const info = assetInfo.name.split('.')
          const ext = info[info.length - 1]
          if (/\.(mp4|webm|ogg|mp3|wav|flac|aac)(\?.*)?$/i.test(assetInfo.name)) {
            return `media/[name]-[hash].${ext}`
          }
          if (/\.(png|jpe?g|gif|svg)(\?.*)?$/.test(assetInfo.name)) {
            return `images/[name]-[hash].${ext}`
          }
          if (/\.(woff2?|eot|ttf|otf)(\?.*)?$/i.test(assetInfo.name)) {
            return `fonts/[name]-[hash].${ext}`
          }
          return `assets/[name]-[hash].${ext}`
        }
      }
    },
    // èµ„æºå†…è”é˜ˆå€¼
    assetsInlineLimit: 4096,
    // å¯ç”¨CSSä»£ç åˆ†å‰²
    cssCodeSplit: true
  },
  // é¢„æ„å»ºä¼˜åŒ–
  optimizeDeps: {
    include: [
      'vue',
      'vue-router',
      'pinia',
      '@vueuse/core',
      'dayjs',
      'zod'
    ]
  }
})
```

### 13.2 ç¯å¢ƒé…ç½®

#### å¤šç¯å¢ƒé…ç½®ç®¡ç†
```bash
# .env.development
VITE_BASE_URL=http://localhost:8080
VITE_APP_PORT=5173
VITE_SOURCE_MAP=true
VITE_ENABLE_MOCK=true

# .env.staging
VITE_BASE_URL=https://api-staging.example.com
VITE_APP_PORT=5173
VITE_SOURCE_MAP=false
VITE_ENABLE_MOCK=false

# .env.production
VITE_BASE_URL=https://api.example.com
VITE_APP_PORT=5173
VITE_SOURCE_MAP=false
VITE_ENABLE_MOCK=false
```

#### ç¯å¢ƒå˜é‡ç±»å‹å®šä¹‰
```typescript
// src/types/env.d.ts
/// <reference types="vite/client" />

interface ImportMetaEnv {
  readonly VITE_BASE_URL: string
  readonly VITE_APP_PORT: string
  readonly VITE_SOURCE_MAP: string
  readonly VITE_ENABLE_MOCK: string
}

interface ImportMeta {
  readonly env: ImportMetaEnv
}
```

### 13.3 Dockeréƒ¨ç½²

#### å¤šé˜¶æ®µæ„å»ºDockerfile
```dockerfile
# æ„å»ºé˜¶æ®µ
FROM node:20-alpine AS builder

WORKDIR /app

# å¤åˆ¶packageæ–‡ä»¶
COPY package*.json ./
COPY pnpm-lock.yaml ./

# å®‰è£…ä¾èµ–
RUN npm install -g pnpm
RUN pnpm install --frozen-lockfile

# å¤åˆ¶æºä»£ç 
COPY . .

# æ„å»ºåº”ç”¨
RUN pnpm build

# ç”Ÿäº§é˜¶æ®µ
FROM nginx:alpine AS production

# å¤åˆ¶nginxé…ç½®
COPY nginx.conf /etc/nginx/nginx.conf

# å¤åˆ¶æ„å»ºäº§ç‰©
COPY --from=builder /app/dist /usr/share/nginx/html

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD curl -f http://localhost/ || exit 1

# æš´éœ²ç«¯å£
EXPOSE 80

# å¯åŠ¨nginx
CMD ["nginx", "-g", "daemon off;"]
```

#### Nginxé…ç½®
```nginx
# nginx.conf
events {
    worker_connections 1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    # æ—¥å¿—æ ¼å¼
    log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" '
                    '"$http_user_agent" "$http_x_forwarded_for"';

    # Gzipå‹ç¼©
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_types
        text/plain
        text/css
        text/xml
        text/javascript
        application/json
        application/javascript
        application/xml+rss
        application/atom+xml
        image/svg+xml;

    server {
        listen 80;
        server_name localhost;
        root /usr/share/nginx/html;
        index index.html;

        # é™æ€èµ„æºç¼“å­˜
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            expires 1y;
            add_header Cache-Control "public, immutable";
            add_header Vary Accept-Encoding;
        }

        # HTMLæ–‡ä»¶ä¸ç¼“å­˜
        location ~* \.html$ {
            expires -1;
            add_header Cache-Control "no-cache, no-store, must-revalidate";
            add_header Pragma "no-cache";
        }

        # SPAè·¯ç”±æ”¯æŒ
        location / {
            try_files $uri $uri/ /index.html;
        }

        # APIä»£ç†
        location /api/ {
            proxy_pass http://backend:8080/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }

        # å®‰å…¨å¤´
        add_header X-Frame-Options "SAMEORIGIN" always;
        add_header X-Content-Type-Options "nosniff" always;
        add_header X-XSS-Protection "1; mode=block" always;
        add_header Referrer-Policy "strict-origin-when-cross-origin" always;
    }
}
```

### 13.4 CI/CDæµç¨‹

#### GitHub Actionsé…ç½®
```yaml
# .github/workflows/deploy.yml
name: Deploy Frontend

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'pnpm'

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Type check
        run: pnpm type-check

      - name: Lint
        run: pnpm lint

      - name: Unit tests
        run: pnpm test:unit --coverage

      - name: E2E tests
        run: pnpm test:e2e

      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          file: ./coverage/lcov.info

  build:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'

    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'pnpm'

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Build
        run: pnpm build
        env:
          VITE_BASE_URL: ${{ secrets.VITE_BASE_URL }}

      - name: Build Docker image
        run: |
          docker build -t frontend:${{ github.sha }} .
          docker tag frontend:${{ github.sha }} frontend:latest

      - name: Deploy to staging
        if: github.ref == 'refs/heads/develop'
        run: |
          # éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
          echo "Deploy to staging"

      - name: Deploy to production
        if: github.ref == 'refs/heads/main'
        run: |
          # éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
          echo "Deploy to production"
```

### 13.5 éƒ¨ç½²è§„èŒƒè¦ç‚¹

#### å¿…é¡»éµå¾ªçš„è§„èŒƒ
- [ ] **ç¯å¢ƒéš”ç¦»**ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå®Œå…¨éš”ç¦»
- [ ] **æ„å»ºä¼˜åŒ–**ï¼šå¯ç”¨ä»£ç åˆ†å‰²å’Œèµ„æºå‹ç¼©
- [ ] **ç¼“å­˜ç­–ç•¥**ï¼šé™æ€èµ„æºé•¿æœŸç¼“å­˜ï¼ŒHTMLæ–‡ä»¶ä¸ç¼“å­˜
- [ ] **å®‰å…¨é…ç½®**ï¼šè®¾ç½®é€‚å½“çš„å®‰å…¨å¤´å’ŒHTTPS
- [ ] **ç›‘æ§å‘Šè­¦**ï¼šéƒ¨ç½²åè¿›è¡Œå¥åº·æ£€æŸ¥å’Œç›‘æ§
- [ ] **å›æ»šæœºåˆ¶**ï¼šæ”¯æŒå¿«é€Ÿå›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
- [ ] **è‡ªåŠ¨åŒ–éƒ¨ç½²**ï¼šé€šè¿‡CI/CDå®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²

---

## åå››ã€æœ€ä½³å®è·µæ€»ç»“

### 14.1 å¼€å‘æµç¨‹æ£€æŸ¥æ¸…å•

#### å¼€å‘å‰å‡†å¤‡
- [ ] **éœ€æ±‚ç†è§£**ï¼šå……åˆ†ç†è§£åŠŸèƒ½éœ€æ±‚å’Œç”¨æˆ·åœºæ™¯
- [ ] **æŠ€æœ¯é€‰å‹**ï¼šé€‰æ‹©åˆé€‚çš„ç»„ä»¶å’Œå·¥å…·åº“
- [ ] **è®¾è®¡è¯„å®¡**ï¼šUI/UXè®¾è®¡å’ŒæŠ€æœ¯æ–¹æ¡ˆè¯„å®¡
- [ ] **ç¯å¢ƒå‡†å¤‡**ï¼šå¼€å‘ç¯å¢ƒå’Œå·¥å…·é…ç½®

#### å¼€å‘è¿‡ç¨‹ä¸­
- [ ] **ä»£ç è§„èŒƒ**ï¼šéµå¾ªé¡¹ç›®ä»£ç è§„èŒƒå’Œæœ€ä½³å®è·µ
- [ ] **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptä¸¥æ ¼æ¨¡å¼
- [ ] **ç»„ä»¶è®¾è®¡**ï¼šéµå¾ªå•ä¸€èŒè´£å’Œå¯å¤ç”¨åŸåˆ™
- [ ] **æ€§èƒ½è€ƒè™‘**ï¼šæ³¨æ„æ€§èƒ½ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒ
- [ ] **æµ‹è¯•ç¼–å†™**ï¼šç¼–å†™å……åˆ†çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

#### æäº¤å‰æ£€æŸ¥
- [ ] **ä»£ç æ£€æŸ¥**ï¼šè¿è¡ŒBiomeæ£€æŸ¥å’Œæ ¼å¼åŒ–
- [ ] **ç±»å‹æ£€æŸ¥**ï¼šTypeScriptç¼–è¯‘æ— é”™è¯¯
- [ ] **æµ‹è¯•é€šè¿‡**ï¼šæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é€šè¿‡
- [ ] **åŠŸèƒ½éªŒè¯**ï¼šæ‰‹åŠ¨æµ‹è¯•åŠŸèƒ½æ˜¯å¦æ­£å¸¸
- [ ] **æ€§èƒ½æµ‹è¯•**ï¼šæ£€æŸ¥é¡µé¢åŠ è½½å’Œäº¤äº’æ€§èƒ½

### 14.2 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

#### é—®é¢˜1ï¼šç»„ä»¶é‡å¤æ¸²æŸ“
```vue
<!-- âŒ é—®é¢˜ï¼šæ²¡æœ‰ä½¿ç”¨keyæˆ–keyä¸å”¯ä¸€ -->
<div v-for="item in items">
  <UserCard :user="item" />
</div>

<!-- âœ… è§£å†³ï¼šä½¿ç”¨å”¯ä¸€key -->
<div v-for="item in items" :key="item.id">
  <UserCard :user="item" />
</div>
```

#### é—®é¢˜2ï¼šå†…å­˜æ³„æ¼
```typescript
// âŒ é—®é¢˜ï¼šæ²¡æœ‰æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
export function useWindowResize() {
  const width = ref(window.innerWidth)

  const handleResize = () => {
    width.value = window.innerWidth
  }

  window.addEventListener('resize', handleResize)

  return { width }
}

// âœ… è§£å†³ï¼šåœ¨ç»„ä»¶å¸è½½æ—¶æ¸…ç†
export function useWindowResize() {
  const width = ref(window.innerWidth)

  const handleResize = () => {
    width.value = window.innerWidth
  }

  onMounted(() => {
    window.addEventListener('resize', handleResize)
  })

  onUnmounted(() => {
    window.removeEventListener('resize', handleResize)
  })

  return { width }
}
```

#### é—®é¢˜3ï¼šçŠ¶æ€ç®¡ç†æ··ä¹±
```typescript
// âŒ é—®é¢˜ï¼šç›´æ¥ä¿®æ”¹props
const props = defineProps<{ user: User }>()

const handleUpdate = () => {
  props.user.name = 'new name' // é”™è¯¯ï¼
}

// âœ… è§£å†³ï¼šé€šè¿‡äº‹ä»¶é€šçŸ¥çˆ¶ç»„ä»¶
const props = defineProps<{ user: User }>()
const emit = defineEmits<{ update: [user: User] }>()

const handleUpdate = () => {
  const updatedUser = { ...props.user, name: 'new name' }
  emit('update', updatedUser)
}
```

### 14.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®

#### ç»„ä»¶ä¼˜åŒ–
- ä½¿ç”¨`v-memo`ä¼˜åŒ–åˆ—è¡¨æ¸²æŸ“
- åˆç†ä½¿ç”¨`KeepAlive`ç¼“å­˜ç»„ä»¶
- é¿å…åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨å¤æ‚è®¡ç®—
- ä½¿ç”¨`shallowRef`å’Œ`shallowReactive`ä¼˜åŒ–å¤§å¯¹è±¡

#### ç½‘ç»œä¼˜åŒ–
- å®ç°è¯·æ±‚å»é‡å’Œç¼“å­˜
- ä½¿ç”¨é˜²æŠ–å’ŒèŠ‚æµä¼˜åŒ–ç”¨æˆ·è¾“å…¥
- å›¾ç‰‡æ‡’åŠ è½½å’Œå‹ç¼©
- å¯ç”¨HTTP/2å’ŒGzipå‹ç¼©

#### æ„å»ºä¼˜åŒ–
- ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
- Tree Shakingç§»é™¤æ— ç”¨ä»£ç 
- èµ„æºé¢„åŠ è½½å’Œé¢„è¿æ¥
- ä½¿ç”¨CDNåŠ é€Ÿé™æ€èµ„æº

### 14.4 å®‰å…¨æœ€ä½³å®è·µ

#### å‰ç«¯å®‰å…¨
- è¾“å…¥éªŒè¯å’ŒXSSé˜²æŠ¤
- CSRFä»¤ç‰ŒéªŒè¯
- æ•æ„Ÿä¿¡æ¯ä¸å­˜å‚¨åœ¨å‰ç«¯
- ä½¿ç”¨HTTPSå’Œå®‰å…¨å¤´

#### APIå®‰å…¨
- JWTä»¤ç‰Œç®¡ç†å’Œåˆ·æ–°
- è¯·æ±‚ç­¾åå’ŒåŠ å¯†
- æ¥å£æƒé™éªŒè¯
- é”™è¯¯ä¿¡æ¯ä¸æ³„éœ²æ•æ„Ÿæ•°æ®

---

## åäº”ã€é™„å½•

### 15.1 å¼€å‘å·¥å…·æ¨è

#### IDEå’Œç¼–è¾‘å™¨
- **VS Code** (æ¨è)
  - Vue Language Features (Volar)
  - TypeScript Vue Plugin (Volar)
  - Biome
  - GitLens
  - Auto Rename Tag
  - Bracket Pair Colorizer

#### æµè§ˆå™¨æ‰©å±•
- **Vue.js devtools** - Vueç»„ä»¶è°ƒè¯•
- **Pinia DevTools** - çŠ¶æ€ç®¡ç†è°ƒè¯•
- **Lighthouse** - æ€§èƒ½åˆ†æ
- **Web Vitals** - æ€§èƒ½æŒ‡æ ‡ç›‘æ§

#### åœ¨çº¿å·¥å…·
- **Vue SFC Playground** - Vueç»„ä»¶åœ¨çº¿è°ƒè¯•
- **TypeScript Playground** - TypeScriptä»£ç æµ‹è¯•
- **Can I Use** - æµè§ˆå™¨å…¼å®¹æ€§æŸ¥è¯¢
- **Bundle Phobia** - åŒ…å¤§å°åˆ†æ

### 15.2 å­¦ä¹ èµ„æº

#### å®˜æ–¹æ–‡æ¡£
- [Vue 3 å®˜æ–¹æ–‡æ¡£](https://vuejs.org/)
- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/)
- [Vite å®˜æ–¹æ–‡æ¡£](https://vitejs.dev/)
- [Pinia å®˜æ–¹æ–‡æ¡£](https://pinia.vuejs.org/)
- [Vue Router å®˜æ–¹æ–‡æ¡£](https://router.vuejs.org/)

#### ç¤¾åŒºèµ„æº
- [Vue Mastery](https://www.vuemastery.com/) - Vueè§†é¢‘æ•™ç¨‹
- [Vue School](https://vueschool.io/) - Vueåœ¨çº¿è¯¾ç¨‹
- [Awesome Vue](https://github.com/vuejs/awesome-vue) - Vueèµ„æºé›†åˆ
- [Vue.js Examples](https://vuejsexamples.com/) - Vueç¤ºä¾‹ä»£ç 

### 15.3 å‚è€ƒé¡¹ç›®

#### å¼€æºé¡¹ç›®
- [Vue Admin Template](https://github.com/PanJiaChen/vue-admin-template)
- [Vben Admin](https://github.com/vbenjs/vue-vben-admin)
- [Naive UI Admin](https://github.com/jekip/naive-ui-admin)
- [Element Plus Admin](https://github.com/kailong321200875/vue-element-plus-admin)

---

**ğŸ“ æ–‡æ¡£ç»´æŠ¤**ï¼šæœ¬è§„èŒƒæ–‡æ¡£åº”éšé¡¹ç›®å‘å±•æŒç»­æ›´æ–°ï¼Œç¡®ä¿ä¸å®é™…ä»£ç ä¿æŒä¸€è‡´ã€‚

**ğŸ¯ ç›®æ ‡**ï¼šé€šè¿‡éµå¾ªæœ¬è§„èŒƒï¼Œç¡®ä¿çŸ¥è·¯é¡¹ç›®å‰ç«¯ä»£ç è´¨é‡é«˜ã€æ€§èƒ½ä¼˜ç§€ã€ç”¨æˆ·ä½“éªŒä½³ã€å¯ç»´æŠ¤æ€§å¼ºã€‚
